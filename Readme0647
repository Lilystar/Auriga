----------------------------------------
//0861 [2011/05/09] by Rayce

・login鯖およびchar鯖起動時にconfファイルを読み込む際、キーワードが
  見つかった場合は以降のルーチンを省略するように高速化

・統一性を持たせるため、inter鯖のlogも interlog.h, interlog_sql.c,
  interlog_txt.c に分離（inter.*, int_guild.c）

----------------------------------------
//0860 [2011/05/09] by Cocoa

・ルーンナイトスキル「ドラゴンブレス」の計算式を修正（battle.c）
	thanks ばるす さん

----------------------------------------
//0859 [2011/05/09] by Cocoa

・bDefEleEnemyがbSubEleになっていたアイテム修正（db/item_db.txt）
	thanks Akayumi さん

・傭兵召喚書の剣と槍が入れ違いになっていた点を修正（db/item_db.txt）
	thanks gokunan さん

----------------------------------------
//0858 [2011/05/09] by Rayce

・db_search() と db_exists() の処理を db_search_dbn() で共通化（db.c）

・SQL: constの付いた構造体にmemcpyしているため、コンパイル時に警告が発生していたのを修正
       （questdb_sql.c）

・SQL: innoDBでは「INSERT DELAYED」が非サポートなため、login鯖の起動/停止時に
       「DELAYED option not supported for table 'loginlog'」が発生していたのを修正
       information_schemaからengine情報を取得し、DELAYEDがサポートされている
       エンジンの場合のみDELAYEDを付ける（account_sql.c）
         ※http://dev.mysql.com/doc/refman/5.1/en/insert-delayed.html

----------------------------------------
//0857 [2011/05/09] by Cocoa

・SpeedRateが変化している状態の時、ステータスの再計算が入る毎に「速度が増加しました」と出ていた不具合を修正（src/pc.c, src/status.c）

----------------------------------------
//0856 [2011/05/08] by Rayce

・script/function/function_jobgroup.txt は未使用なので、map_auriga.conf から削除

・db/addon以下のdbファイルを現在のdbファイルの定義と同期
  （merc_db_add.txt, skill_cast_db_add.txt）

----------------------------------------
//0855 [2011/05/08] by Cocoa

・呪い、石化状態でブレッシングを受けると状態異常解除のみ行うように修正（src/status.c）

・アークビショップのスキルツリーでオラティオの最大取得レベルが5だったのを修正（db/skill_tree.txt）

・アークビショップスキル「クリアランス」が自身に使用可能だったので修正（db/skill_db.txt）
	※GvGにおいて敵に使用は出来ないという仕様はまだ未適用です。

----------------------------------------
//0854 [2011/05/08] by Cocoa

・カートが外れた時にカートブースト状態が終了するように修正（src/pc.c）

----------------------------------------
//0853 [2011/04/15] by popori

・httpdのアカウント作成経由で性別が小文字だったのを修正 (src/login/login_httpd.c httpd/index.html)

・TXTで新規アカウント作成時渡されたbirth情報が保存されていなかったのを修正 (src/login/account_txt.c)

・不正対策の強化 (src/map/clif.c)

・いくつかのwarningを修正 (src/common/sqldbs.c src/char/char.c src/char/accregdb_sql.c src/char/chardb_sql.c src/char/guilddb_sql.c src/char/homundb_sql.c)
　Cocoaさんに感謝

・SQL:0851のquestテーブルのエンジン指定がTYPEになっているのでENGINEに変更 (sql-files/Auriga851_changetable.sql sql-files/main.sql)

----------------------------------------
//0852 [2011/04/13] by Blaze

・SQL：0851にてコンパイルエラーが発生するのを修正（char/questdb_sql.c）
	-> queryの戻り値をbool型に修正
	-> SQL文の文字列範囲がおかしかったのを修正

----------------------------------------
//0851 [2011/04/13] by Blaze

・クエストリスト実装 (map.*, quest.*, clif.*, pc.c, mob.c, common/mmo.h, db/quest_db.txt)

・セーブデータ対象にクエスト情報を追加 (char/inter.c, char/char.c, char/int_quest.*, char/questdb.*)

・SQL：DBにクエストテーブル追加 (common/sqldbs.h, sql-files/main.sql, sql-files/drop_table.sql, sql-files/db_maintenance.sql,
								 sql-files/convert_engine_myisam.sql, sql-files/convert_engine_innodb.sql, sql-files/Auriga851_changetable.sql)

・TXT：JOURNAL_IDENTIFIERを13->14に引き上げ (journal.c)

・パケットDBにクエストリスト関連のパケット定義を追加 (db/packet_db.txt)

・スクリプト命令・関数に以下を追加（script.c, doc/script_ref.txt）
	setquest : クエストを追加します
	chgquest : クエストを更新します
	delquest : クエストを削除します
	checkquest : クエストの情報を返します
	getquestlimit : クエストの制限時間を取得します
	getquestcount : クエストの討伐数を取得します
	getquestmaxcount : クエストの討伐最大数を取得します
	※詳しくはscript_ref.txtを参照

・クエストリストのメンテナンスNPC実装（npc_misc_questlist.txt, conf/map_auriga.conf）

・以下のクエストをクエストリストに対応化（script/*）
	ソードマン転職クエスト（npc_job_01swordman.txt）
	マジシャン転職クエスト（npc_job_02magician.txt）
	アーチャー転職クエスト（npc_job_03archer.txt）
	アコライト転職クエスト（npc_job_04acolyte.txt）
	マーチャント転職クエスト（npc_job_05merchant.txt）
	スーパーノービス転職クエスト（npc_job_23supernovice.txt）
	テコンキッド転職クエスト（npc_job_24taekwonkid.txt）
	ガンスリンガー転職クエスト（npc_job_28gunslinger.txt）
	忍者転職クエスト（npc_job_29ninja.txt）
	転生クエスト（npc_job_transmigration.txt）
	魔王モロク討伐クエスト（npc_town_morocc.txt）
	運命のカラスクエスト（npc_town_morocc.txt）

----------------------------------------
//0850 [2011/04/13] by popori

・auth_node形式を一旦auth_fifo形式にする (login.c char.c mmo.h)

・少しだけパケット情報を追記 (client_packet.txt)

----------------------------------------
//0849 [2011/04/12] by popori

・ノードの削除を忘れているケースがあったので修正 (login.c)

・いくつかJT_*****が更新されていたのでコメントアウトで定義だけ追加 (skill.h)

・ドキュメントを少し更新 (server_build.txt sqllogin.txt)

----------------------------------------
//0848 [2011/04/11] by Cocoa

・3次職の基本所持量を修正（db/job_db1.txt）

・Job補正値を各職Wikiを参考に修正（job_db2.txt, job_db2-2.txt, status.c）

----------------------------------------
//0847 [2011/04/11] by Rayce

・デッドリーインフェクトによる状態異常の複写ができるかどうかの定義を
  scdata_db.txt で行うように拡張（status.*）

・anti hacker強化（booking.c, skill.c）
・定数部分には出来る限りconstを付与する（mob.*, pc.c, skill.c）
・マクロの変数を括弧で括る（clif.c）

----------------------------------------
//0846 [2011/04/10] by Rayce

・booking_map_db.txt および booking_job_db.txt において、IDの昇順に
  並んでない場合にbinary searchが正常動作しなくなるので、読込時に
  補正を行うように修正（booking.c）

・booking_map_db.txtではID「0」は有効な値なので、memsetでの初期化は
  「-1」で詰めるように修正（booking.c）

・booking_idをunsigned int型に統一（booking.*, clif.*, map.h）

・混乱を避けるため、booking_search_mapid() と booking_search_jobid() の
  結果を反転させる（booking.c）

・パケット0x805の<more>に相当する部分において、変数flagの値が非常に大きい
  場合に桁溢れが発生する可能性があるので修正（clif.c）

・booking_map_db.txt の「ピラミッドダンジョン 2F」のMAPIDが恐らく
  間違っているので修正（db/booking_map_db.txt）

----------------------------------------
//0845 [2011/04/10] by Rayce

・計算式を一般式に展開し簡素化（battle.c, skill.c）
	-> ヘルズプラント
	-> 寒いジョーク
	-> スクリーム
	-> クラッカー

・インスピレーションでのロスト経験値の型はatn_bignumberである
  必要はないのでintに変更（skill.c）

・スリングアイテムとグラウンドドリフトにおける判定文が何か
  おかしいので修正（skill.c）

・細かいリファクタリング（battle.c, skill.c, status.c）

----------------------------------------
//0844 [2011/04/10] by popori

・httpd経由で正常にアカウントが作成出来なかったバグを修正 (login_httpd.c)

----------------------------------------
//0843 [2011/04/09] by popori

・ログインサーバーのソースを整理 (src/login/login.c)

・tool/phpでアカウントを作成出来るように対応 (tool/php/auriga.php tool/php/createaccount.php)

----------------------------------------
//0842 [2011/04/08] by Blaze

・0839でJOURNAL_IDENTIFIERを上げていないので12->13にアップ (journal.c)

・0837の修正にfloatが使用されているのを修正 (battle.c)

・0838でデバッグコマンド「@lvup」によるレベルアップ時、
　ステータスポイント取得設定が反映されていない不具合修正（atcommand.c）

・0838の判定文を微修正（pc.c）

・0822以降、養子縁組の判定文誤りにて養子の要請が出来なかった不具合を修正（pc.c）
	Thanks 黒猫 さん

----------------------------------------
//0841 [2011/04/08] by popori

・x64環境下でコンパイルするとワーニングが発生するのを修正 (login.c)
　Cocoaさんに感謝

----------------------------------------
//0840 [2011/04/08] by Cocoa

・0839でget_status_point_over_lv100ではなくpk_murderer_pointを参照していた不具合修正

----------------------------------------
//0839 [2011/04/08] by popori

・sqldbs.*に関する変更 (src/common/sqldbs.*)
 ->プリペアドステートメントに関するAPIを追加

 ->sqldbs_simplequery()を追加して単純な文字列を流す場合はこちらを使用するよう変更する

・ログインサーバーに関する変更 (src/login/* sql-files/Auriga837_changetable.sql sql-files/main.sql conf/login_auriga.conf)

 ->ログインサーバーの処理が全てlogin.cに集約しているので、各機能ごとに分割する
   今のところ大雑把にファイルを分割しただけです。
   少々強引ですが、1ファイルに全ての処理が集約しているのは形式として良くないと考えたためです。

 ->SQL: 該当のセーブデータを縮小しコーディングを簡略化する(0229の変更の補完)
   login table userid varchar(24) → login table userid varchar(23)
   login table user_pass varchar(24) → login table user_pass varchar(23)
   login table email varchar(40) → login table email varchar(39)
   worldreg table reg varchar(32) → worldreg table reg varchar(31)

 ->SQL: loginテーブルのsexをENUM型に変更する

 ->安全のためデフォルトでconf/login_auriga.confのristrict_admin_localオプションを有効に変更

 ->login_auriga.confのnew_accountをデフォルトで0に変更

 ->auth_fifo形式を廃止してauth_nodeを新たに追加する

 ->SQL: ログインサーバーのプリペアドステートメント、トランザクションに対応。一部のSQLインジェクション対策はプリペアドステートメントを使用するよう変更 
        トランザクションに対応するにはMySQLのストレージエンジンをInnoDBに変更して下さい。
        今回のパッチからMySQL4.xをサポートを打ち切ります。
        各自5.xに移行して下さい。
        また、MyISAMの場合START TRANSACTIONを送っても無視されるだけなので、エンジンに関わらずSTART TRANSACTIONを送っています。

 ->その他細かい変更

・キャラクターサーバーに関する変更 (src/char/*)

 ->各機能ごとにソースファイルを分離
   現在はログインサーバーと同じくある程度大雑把に分割しただけです。
   interサーバーとしてのparse部分は従来通りint_****.*にして保存処理を別ファイルに置き換えました。
   同時にキャラクターサーバーとしての動作も1ファイルに集約しているので分割。
   やはり少々強引ですが、1ファイルに処理が集約しすぎていると考えたためです。
   現在暫定的にグローバルに設置しているオブジェクトがありますが、徐々に見直す予定。

 ->SQL: キャラサーバーの一部の処理をトランザクション・プリペアドステートメントに対応させる
        現在一部は未対応なので、追々全て対応させます。

 ->auth_fifo形式を廃止してauth_nodeを新たに追加する

 ->その他細かい変更

・上記の変更に伴いエンジンコンバート用スクリプトを追加 (sql-files/convert_engine_innodb.sql sql-files/convert_engine_myisam.sql)

・MySQLの簡易的なメンテナンス用にdb_maintenance.sqlを追加 (sql-files/db_maintenance.sql)
　ANALYZE TABLE、OPTIMIZE TABLEを実行するだけのものです。
　定期的に実行することによって、Aurigaで使用するテーブルのパフォーマンス低下を防げるかもしれません。

・AUTH_FIFO_SIZEをコードから削除 (src/common/mmo.h)

・MySQL5.2以降に対応(エンジンの指定をTYPEからENGINEに変更しただけです) (sql-files/main.sql)
　crisp.さんに感謝

・utils.hにbool型を追加(charのシノニム) (src/common/utils.h)

・上記の変更に伴い一部関数の仕様を変更 (src/common/sqldbs.* src/char/* src/map/map.c src/map/intif.c)

・性別の定義をenumで用意する (src/common/mmo.h src/login/login.* src/login/account_*.c src/map/atcommand.c src/map/clif.c src/map/itemdb.c src/map/pc.c src/map/script.c src/map/skill.c)

・管理者用パケットのサイズの一部の無駄を省く (src/login/login.c tool/ladmin doc/admin_packet.txt)
  今回の変更でtool/php以下のものは現在対応していません。
  後日tool/php以下も対応させます。

・2010-08-03aRagexeRE以降のクライアントの誕生日認証キャラ削除パケットに対応 (tool/ladmin src/char/char.c src/login/login.* src/common/mmo.h sql-files/main.sql sql-files/Auriga837_changetable.sql conf/char_auriga.conf doc/serverlink_packet.txt win32_start.bat)
  誕生日のデータは初期値は000000です。
  char_auriga.confのdelete_delay_timeはキャラを削除可能までの待機時間です、各自設定して下さい。デフォルトは24時間。
  今回の変更でtool/php以下のものは現在対応していません。
  後日tool/php以下も対応させます。

・上記の変更に伴いPACKETVERを31に引き上げ (vc_make.bat bcc32_make.bat Makefile *.dsp)

・ビルドオプションにAC_BIRTHDATEを追加 (vc_make.bat bcc32_make.bat Makefile src/login/login.c)
　誕生日認証でキャラを削除する場合はONにして下さい。
　2010-08-03aRagexeRE以降のクライアントのみ対応です。
　誕生日データはYYMMDDの形式で半角数値6バイト強制です。

・コスチュームシステム用にセーブデータだけ拡張しておく (src/common/mmo.h src/char/char.c src/map/itemdb.h sql-files/Auriga837_changetable.sql sql-files/main.sql)

・装備閲覧でMAPサーバーがクラッシュするバグを修正 (src/map/clif.c)
　Akayumiさんに感謝

・MAX_PACKET_DBとpacket_db構造体の定義をclif.hからclif.cに移動 (clif.*)

・本家の設定に合わせてペットの髪型情報の送信はAREA指定で送るよう変更 (src/map/clif.* src/map/pet.c)

・フリーキャストで移動速度が増加するバグを修正 (src/map/status.c src/map/unit.c)
　うに〜くさんに感謝

・攻撃による状態異常付与の仕様を一部巻き戻す (src/map/battle.*)
 ->スキル「猛虎硬派山」のノックバック効果はダメージが発生しないとノックバックしないよう変更
 ->ダメージが1以上の場合のみ攻撃による状態異常を付与させるよう変更

・gcc4.3.4環境下でのコンパイルワーニングの修正 (src/map/battle.c src/map/skill.c src/map/status.c)

・最大所持金を本家仕様に合わせて拡大 (src/map/mmo.h)

・0x43fのパラメータをパケットの構造に合わせて拡張だけしておく (src/map/atcommand.c src/map/clif.* src/map/pc.c src/map/skill.c src/map/unit.c)
　基本的にval1,val2,val3に入る値は確率であったり、適用%だったりします。

・クラスIDの定義にJT_SANTA、JT_SUMMERが抜けているので追加 (src/common/mmo.h)

・職業のenum定義を使用していない箇所を使用するよう変更 (src/map/clif.c)

・battle_auriga.confのclif_fix_levelを少し拡張 (conf/battle_auriga.conf src/map/clif.c)
　3次職でレベルが150以上の場合でもオーラを表示出来るように

・0838を少し修正 (src/map/pc.c)

・スキルを一時的に覚えた状態でポイントを振るとポイントだけ消費されるのを修正 (src/map/pc.c)
　Cocoaさんに感謝

----------------------------------------
//0838 [2011/04/07] by Cocoa
・3次職の養子がbaby_status_max以上にステータスが振れなかった不具合修正（pc.c）

・BaseLevel100以上の時にレベルアップで取得するステータスポイントをjRO仕様に修正（pc.c）

・戦闘設定に「get_status_point_over_lv100」を追加（battle.*, pc.c, conf/battle_auriga.conf）
　-> BaseLevel100以上の時にレベルアップで取得できるステータスポイントの方式を選択できます。

----------------------------------------
//0837 [2011/04/04] by Cocoa

・ヘルズプラントのダメージ式を修正（battle.c）
	Thanks velvet0001 さん

----------------------------------------
//0836 [2011/03/06] by Blaze

・0738以降、Mobが状態異常などにより移動速度が変化した際、表示上の速度が変化しなかった不具合修正(clif.c)

・戦闘設定に「clif_fix_level」を追加(battle.*, clif.c, conf/battle_auriga.conf)
　-> PC,Mobなどがレベル100以上の場合、99に補正する（オーラを表示する）かどうかを設定できます（デフォルト：no）

・ウォーロックスキル「リーディングスペルブック」でテトラボルテックスの効果が発動しなかったのを修正(skill.c)
　-> PC以外のキャラでもテトラボルテックスが使用できるように修正

・シャドウチェイサースキル「リプロデュース」で一部スキルが習得できなかったのを修正(skill.c)
　-> 例）デュプレライト、シビアレインストーム、テトラボルテックスなど

・0835のスキル使用時、装備品の装備チェックを巻き戻し(skill.c)
　-> メカニックスキル「パイルバンカー」「ホバーリング」のみ装備チェックをするように変更
	Thanks ばるす さん

・ジェネティックスキル「スリングアイテム」のダメージ効果を相手が敵以外の場合は発生しないよう修正(skill.c)
	Thanks Akayumi さん

----------------------------------------
//0835 [2011/02/26] by Blaze

・状態異常「マジックマッシュルーム」のランダムスキル使用を実装(status.c)

・レンジャースキル「ウォーグダッシュ」の衝突ダメージ効果を実装(unit.c, skill.c, battle.c)

・ウォーグ騎乗時、一部トラップスキルが使用できるように修正(skill.c)

・ウォーグ騎乗中、ログイン時にエラーが表示される現象の回避策を適応(char.c)

・気功の仕様を変更、処理を最適化(pc.c, skill.c, battle.c, db/skill_cast_db.txt)
　-> 対象の職業がモンク・修羅以外は「気功」のスキルレベルを参照しないように変更
　-> 気功セット関数「pc_addspiritball()」を複数個セットできるように拡張
	Thanks Elisil さん

・シャドウチェイサースキル「メイルストーム」の仕様を変更(skill.c)
　-> 使用者がメイルストームの効果範囲内にいるときのみ、スキル吸収効果が発動するように
	Thanks unsyu さん

・0801のスキル使用時、水場セル判定の処理誤りを修正(skill.c)
	Thanks muchey さん

・スキル使用アイテム判定で、アイテムの種別が装備品の場合は装備中かどうかを判定するように修正(skill.c)
	Thanks olion22 さん

・ランダムスキルDB構造体とチェンジマテリアルDB構造体の宣言で、
　extern修飾子にも関わらず実体がstaticで隠蔽されていたのを修正(skill.c)
	Thanks takeshi さん

・ウォーロックスキル「コメット」を火属性から無属性攻撃に修正(db/skill_db.txt)
	Thanks unsyu さん

・状態異常「発火」「氷結」を対象がボス属性の場合は無効に修正(db/scdata_db.txt)
	Thanks olion22 さん

----------------------------------------
//0834 [2011/02/24] by Blaze

・スキルユニット設定処理「skill_unitsetting()」のflag値をスキル種別によって用途を変えるように変更(skill.c)
　-> グラウンドドリフト：装備している弾丸のIDを渡すように変更
　-> トラップ系スキル：使用した罠のIDを渡すように変更

・レンジャースキル「トラップ研究」の効果を追加(skill.c)
　-> 設置用トラップが必要なスキルにおいて、改良型設置用トラップで代用が可能になります

・ハンタースキル「リムーブトラップ」の処理を変更(skill.c)
　-> 設置用トラップを消費して使用した場合にのみ罠を返還するように修正
　-> ある条件下で罠アイテムを量産できていたのが修正されます

・トラップ系スキルの時間切れ時、罠を消費していた場合のみ罠を返還するように修正(skill.c)

・ガンスリンガースキル「グラウンドドリフト」使用時、弾丸が残り1のときに効果が不定になっていたのを修正(skill.c)

・0455の矢種別設定でスフィア系を個別に設定されていたのを廃止(db/item_arrowtype.txt, db/skill_require_db2.txt)

・レンジャースキル「鋭敏な嗅覚」のトラップ除去効果を実装(skill.c)

・シャドウチェイサースキル「メイルストーム」実装(skill.c)

・「メテオストーム」「ロードオブヴァーミリオン」のオーバーレベル条件を修正(skill.c)
　-> スキルレベルが11以上 -> 使用者がMOB & スキルレベルが戦闘設定「monster_skill_over」以上の場合

・NPCスキル「アースクエイク」をMdef無視攻撃に修正(battle.c)

----------------------------------------
//0833 [2011/02/20] by Blaze

・一部の3-1次職スキルの攻撃力・詠唱時間などを修正(skill.c, battle.c, db/skill_cast_db.txt)

・連続ヒットする魔法系スキルのダメージ計算で、一部のスキルのみヒット数で倍化するように変更(battle.c)
　-> 一部のスキルにおいて、草系のモンスターへヒット数分のダメージを与えていたのが修正されます

・メカニックスキル「FAW マジックデコイ」の召喚処理を実装(skill.*, clif.*)

・ポイズニングウェポン、リーディングスペルとオートシャドウスペルのスキル使用時、
　材料がなければリストを表示しないように修正(clif.c)

・NPCスキル「アースクエイク」の処理を最適化(skill.c, battle.c, db/skill_db.txt)
　-> 物理スキルから魔法スキルに変更
　-> 連続ヒットの見た目を修正
　-> 威力を本家仕様に修正

・モンクスキル「三段掌」の処理を最適化(skill.c, battle.c)

・チャンピオンスキル「伏虎拳」と「連柱崩撃」の使用条件で
　「三段掌」「連打掌」から繋げて使用できていなかったのを修正(skill.c)

・ジェネティックスキル「スリングアイテム」をアイテムを装備していない状態で使用すると
　サーバークラッシュが起きてしまう不具合を修正(skill.c)
	Thanks ChowZenki さん

・シャドウチェイサースキル「シャドウフォーム」をお互いにかけ合った状態で
　無限ループが発生してしまう不具合を修正(battle.c)
	Thanks Akayumi さん

・ルーンナイトがドラゴン騎乗中、ログイン時にエラーが表示される現象の回避策を適応(char.c)
	Thanks refis さん

----------------------------------------
//0832 [2011/02/16] by Blaze

・ウォーロックスキル修正(skill.c, status.c, battle.c, db/skill_db.txt, db/skill_cast_db.txt, db/skill_unit_db.txt)
　-> チェーンライトニング連鎖を実装
　-> ヘルインフェルノの闇属性攻撃を実装
　-> テトラボルテックスの使用条件をサモンボールの属性を問わないように修正
　-> テトラボルテックスの状態異常効果を実装
　-> クリムゾンロックの攻撃範囲が対象のノックバック先の位置から発生していたのを修正
　-> ドレインライフでプレイヤーのHP表記がおかしくなっていた不具合修正
　-> ホワイトインプリズンのダメージ効果を修正
　-> ジャックフロストを氷結状態でなくてもダメージを与えるように修正
　-> アースストレインの攻撃範囲を修正
　-> その他スキル威力計算式の見直し

----------------------------------------
//0831 [2011/02/14] by Blaze

・スキル使用失敗のメッセージを多様化(clif.*, skill.c, unit.c, homun.c, vending.c)
　-> 各スキル使用失敗時、アイテム不足や気弾が必要などの詳細メッセージが表示されます
　-> 0x110のパラメータを変更

・アークビショップスキル「アンシラ」が所持限界数を超えて生成できないように修正(skill.c)

・アイテムの各ルーンストーンとアンシラをドロップ不可、倉庫不可、取引不可に修正(db/item_db2.txt)

・0829のドラゴン騎乗時の所持量増加ボーナス誤りを修正(status.c)
	Thanks ARIA さん

・ソウルリンカースキル「転生一次職業の魂」でシーフハイが判定されない不具合修正(status.c)
	Thanks ARIA さん

・アークビショップスキル「シレンティウム」の最大レベルを修正(db/skill_db.txt)
	Thanks ARIA さん

----------------------------------------
//0830 [2011/02/13] by Blaze

・ルーンナイトスキル修正(skill.c, status.c, battle.c, db/skill_db.txt, db/skill_db2.txt, db/skill_cast.txt,)
　-> エンチャントブレイドを自分自身対象から相手指定に修正
　-> ソニックウェーブの射程距離を修正
	Thanks Sheep さん
　-> エンチャントブレイドの効果中、Matkに影響しないように修正
　-> エンチャントブレイドの計算式を相手Mdefに影響するように修正
　-> ファントムスラストを攻城戦中やボスモンスター相手には移動効果が発動しないように修正
　-> ハンドレッドスピアで追撃効果が発動する時にノックバック効果を追加
　-> その他スキル威力計算式の見直し

・転生ルーンナイトの「バーサーク」スキル習得条件からJobLvの規制を削除(db/skill_tree.txt)

・ルーンストーン製造の成功率を本鯖仕様化(skill.c, db/produce_db.txt)

・0829のスキル「武器精錬」の判定式誤りを修正(status.c)

----------------------------------------
//0829 [2011/02/13] by popori

・フリーキャストの計算式を修正 (unit.c status.c)

・ペコペコ・ドラゴン騎乗時に所持量増加ボーナスが消えていたので修正 (status.c)

・スキル「武器精錬」をメカニックが行う際は、JobLvに関係なくJovLv70として計算するよう変更 (status.c)

・スキル「オートシャドウスペル」で不正なパケットにより3次職スキルも使用出来る可能性があるので、チェックを強化 (skill.c)

・enum定義LOOK_MOBは本家に存在しないので削除する (map.h pc.c script.c)

・ペットの卵で名前変更済みでも、冠詞に「愛されている」が付かない場合があるのを修正 (clif.c)
　tomoさん、anteraさん、pneumaさんに感謝

・GM右クリックメニュー「全ての装備を解除」にて1分間全ての脱衣系の状態異常にかかるよう本家仕様に修正 (clif.c)

・スキル「ソウルドレイン」の処理位置を移動 (battle.c)

・PACKETVER7-13でのコンパイルエラーを修正 (clif.c)
　シロウさんに感謝

・スキル「メルトダウン」を本家仕様に変更 (scdata_db.txt)
　※ゴスペルによる、状態異常解除可否は分からなかったのでとりあえず有効にしています。
　ばるすさんに感謝

・pc_nextbaseexp() pc_nextjobexp()は順次参照で効率が悪い気がするので、ダイレクトジャンプさせるよう最適化 (pc.c)

・item_db.txtのIDが一部違うのを修正 (item_db.txt)
　シロウさんに感謝

・その他細かい変更 (packet_db.txt battle.c clif.c skill.c itemdb.h)

----------------------------------------
//0828 [2011/02/13] by Blaze

・ジェネティックスキル実装
	(skill.*, status.*, battle.c, clif.c, unit.c, pc.c,
	 db/skill_db.txt, db/skill_db2.txt,db/skill_cast_db.txt,
	 db/skill_require_db.txt, db/skill_require_db2.txt, db/skill_unit_db.txt,
	 db/skill_tree.txt, db/scdata_db.txt, db/produce_db.txt)

・3次職関連のアイテムDBを更新(item_db.txt, const.txt)
　※暫定処理中のため、3次職専用装備が2次職も装備可能で定義されています

・ジェネティックスキル「チェンジマテリアル」のDBを追加(db/changematerial_db.txt, db/packet_db.txt, doc/client_packet.txt)

・ブラックスミススキル「武器修理」や料理システム、各製造系スキルの処理を最適化(map.h, clif.c, skill.c, script.c)

・ロイヤルガードスキル「イクシードブレイク」使用時にサーバークラッシュする不具合を修正(status.c)
	Thanks rapis さん、unsyu さん、Azurite さん

・状態異常「アースドライブ」の効果でASPDが増加していた不具合を修正(status.c)
	Thanks rapis さん、unsyu さん

・ミンストレル・ワンダラースキル「地獄の歌」の判定誤りを修正(skill.c)
	Thanks rapis さん

・セージスキル「アドバンスドブック」の効果が異常だった不具合を修正(status.c)
	Thanks ねぎぽん さん

・シャドウチェイサースキル「シャドウフォーム」の仕様を変更(skill.c, db/skill_db.txt)
　-> 自分自身には使用できないように修正
　-> 一般MAPにはパーティメンバーに対してのみ発動するように修正
	Thanks ばるす さん、ARIA さん


----------------------------------------
//0827 [2011/02/06] by Blaze

・ロイヤルガードスキル実装
	(skill.*, status.c, battle.c, clif.c, unit.c, pc.c, common/mmo.h, 
	 db/skill_db.txt, db/skill_db2.txt,db/skill_cast_db.txt, db/skill_require_db.txt, db/skill_unit_db.txt)
　-> バンディングの一部効果は未実装です
　-> シールドスペルのレベル2使用時、盾のMdefを参照する箇所を
　　 暫定でDefを参照するようにしています

・ハイウィザードスキル「ソウルドレイン」とNPCスキル「自爆」が動作しなかった不具合修正(battle.c)
	Thanks ばるす さん

・ガンスリンガースキル「シングルアクション」とセージスキル「アドバンスドブック」習得時、ASPDが遅くなる不具合修正(status.c)
	Thanks ARIA さん

・バードスキル「夕陽のアサシンクロス」とダンサースキル「私を忘れないで」で、演奏範囲外に出ると効果が継続しない不具合修正(status.c)
	Thanks ばるす さん

・バードとダンサーの合奏スキルの使用条件の職業判定誤りを修正(skill.c)
	Thanks Azurite さん、ばるす さん

・修羅のスキルツリーで「雷光弾」と「獅子吼」の前提スキルを修正(db/skill_tree.txt)
	Thanks bansyu さん

・シャドウチェイサースキル「ストリップアクセサリー」の最大レベルを3から5に修正(db/skill_db.txt)
	Thanks Azurite さん

・ファルコンレンタルNPCから該当職でもレンタルできない不具合修正(npc_job_11hunter.txt)
	Thanks ayu さん

・クルセイダー専用ペコペコレンタルNPCから該当職でもレンタルできない不具合修正(npc_job_14crusader.txt)
	Thanks ayu さん

・アイテム「毒薬の瓶」使用時、該当職でも効果が得られない不具合修正(db/item_db.txt)
	Thanks ayu さん

・修羅スキル「號砲」と「羅刹破凰撃」が味方にもダメージを与えることができた不具合修正(skill.c, db/skill_db.txt)

・状態異常「マジックマッシュルーム」と「リーチエンド」が死亡後にもダメージ効果が継続する不具合修正(status.c)

・スナイパースキル「シャープシューティング」等の斜線算出で、斜め方向の距離が半減していたのを修正(map.c)


----------------------------------------
//0826 [2011/02/03] by Blaze

・修羅スキル実装
	(skill.c, status.*, battle.*, clif.c, unit.c, pc.c, mob.c, map.h
	 db/skill_db.txt, db/skill_db2.txt,db/skill_cast_db.txt, db/skill_require_db.txt)


----------------------------------------
//0825 [2011/01/29] by Blaze

・ミンストレル・ワンダラースキル実装
	(skill.*, status.*, battle.c, clif.c, unit.c, db/skill_db.txt, db/skill_db2.txt,
	 db/skill_cast_db.txt, db/skill_require_db.txt, db/skill_require_db2.txt, db/skill_unit_db.txt)
　-> 合唱人数による効果上昇および消費SP減少は調整中のため未実装です

・戦闘設定に3次歌スキルが重複して効果を得られるか設定を追加(battle.*, conf/battle_auriga.conf)

・複数ヒットする魔法系スキルの威力の計算式修正(battle.c)

・ダンサースキル「魅惑のウィンク」の効果を修正(status.c, battle.c, skill.c, unit.c)
　-> 一律攻撃不可状態から使用者のみ攻撃不可になります

・ランダム発動スキルDBを追加(skill.*, db/skill_random.txt)
　-> 試作段階のため、現状ソース内の処理専用となります
　　（今後、スクリプトからのランダム発動を検討中）

・マジシャンスキル「フロストダイバー」の凍結効果がすぐに解除されてしまう不具合修正(skill.c)
	Thanks ばるす さん

・戦闘設定の新ステータス計算形式の設定が必要ポイント計算式に反映されない不具合修正(pc.c)
	Thanks kanashi さん

・カプラ職員とジョンダ職員からカートを正常にレンタルできない不具合修正(npc_misc_kafra.txt, npc_misc_zonda.txt)
	Thanks p-studio さん、NP3228 さん

・シャドウチェイサースキル「フェイタルメナス」使用時、
　相手が死亡後に対象の情報を参照していた不具合修正(skill.c)
	Thanks unsyu さん、refis さん

・シャドウチェイサースキル「オートシャドウスペル」の仕様を変更(battle.c, clif.c)
　-> 近距離攻撃でダメージを与えた場合に発動するように修正
　-> 3次職スキルは発動スキルメニューで選択できないように修正
	Thanks unsyu さん、refis さん


----------------------------------------
//0824 [2011/01/24] by Blaze

・ソーサラースキル実装
	(skill.*, status.*, battle.c, clif.c, unit.c, db/skill_db.txt, db/skill_db2.txt,
	 db/skill_cast_db.txt, db/skill_require_db.txt, db/skill_unit_db.txt)
　-> 精霊関係のスキルは未実装です

・サンプルの転職NPCの不具合を修正(npc_custom_jobchange.txt)

----------------------------------------
//0823 [2011/01/23] by Blaze

・シャドウチェイサースキル実装
	(skill.*, battle.c, map.*, clif.*, db/skill_db.txt, db/skill_db2.txt,
	 db/skill_cast_db.txt, db/skill_require_db.txt, db/skill_require_db2.txt, db/skill_unit_db.txt)
　-> メイルストームは動作不安定のため、未実装です

・シャドウチェイサー関連の状態異常実装(status.*, unit.c, mmo.h, pc.c, mob.c, pet.*, db/scdata_db.txt)

・スクリプト関数「checkwolf()」の仕様変更(script.c)
　-> パラメータ指定により、ウォーグ召喚またはウォーグ騎乗の両方がチェックできるようになります
　-> 「checkwolfmount()」は廃止されます

・0822以降、一部コンパイラにてエラーが出る不具合を修正 (script.c)
	Thanks eucalyptus さん

----------------------------------------
//0822 [2011/01/22] by Blaze

・3次職実装(mmo.h, char.c, map.h, pc.*, skill.c, status.c, clif.c, atcommand.c, mob.c)

・職業定義関連のDBを修正(db/exp.txt, db/job_db1.txt, db/job_db2.txt, db/job_db2-2.txt, db/job_hp_db.txt, db/job_sp_db.txt, db/skill_tree.txt)

・スクリプト定義値「Class」の仕様変更(db/const.txt, map.h, pc.*)
　-> Auriga内部定義の職業値からClass値を返すように変更
　（これにより、ガンスリンガーや忍者のClass値暫定処理が修正されます）
　-> 既存の職業値を取得する定義値「Job」を新規に追加

・スクリプト関数「getbaseclass()」追加(script.c, doc/script_ref.txt, conf/map_auriga.conf)
　-> 現在の職業Class値から前職のClass値を取得します
　-> function_jobgroup.txtでの職業グループ取得は非推奨となります

・Classを使用しているスクリプトやDBを修正 (db/item_db.txt, script/***.txt)

・3次職関連の戦闘設定を追加 (battle.*, battle_auriga.conf)
　-> new_statusup_calc : ステータス100以上のポイント計算式を変更できます
　-> third_status_max : 3次職のステータス限界値を設定できます
　-> third_baby_status_max : 養子3次職のステータス限界値を設定できます
　-> third_max_aspd : 3次職の攻撃速度の上限を設定できます

・DK/DC関連職業のキョンシーの定義追加 (mmo.h, pc.*, bcc32_make.bat, vc_make.bat, Makefile)

----------------------------------------
//0821 [2011/01/11] by popori

・歩行速度に関するバグを修正 (status.c pc.c)
　NP3228さんに感謝

・スキル「トマホーク投げ」はアイテムによる状態異常等の判定を行わないように変更 (skill.c)

・item_db.txtを少し修正 (item_db.txt)

----------------------------------------
//0820 [2011/01/10] by popori

・ホムンクルスのデータを本鯖仕様に修正 (homun_db.txt)

・カード補正効果無視のスキルはアイテムによる状態異常等の判定を行わないように変更 (skill.c)

・スキル「エンチャントデッドリーポイズン」「メルトダウン」「ポイズニングウェポン」の状態異常は物理攻撃スキルHIT時に判定を行うよう変更 (skill.c)

----------------------------------------
//0819 [2011/01/10] by popori

・オートカウンター、回避、完全回避以外はダメージが0の状況でもスキル、カード、武器による状態異常判定を行うように変更 (battle.*)
　※表記上x%の確率で回避と書いてあるスキルもダメージ回避が成功したとしても状態異常判定は行います。

・スキル「猛虎硬派山」のノックバック効果は回避判定が無い場合ダメージ0でも発動するように変更 (battle.c)

・スキル「メテオストーム」「ロードオブヴァーミリオン」「ストームガスト」以外のスキルのダメージディレイはamotion+500ではなくamotion分のみに変更 (battle.c)

・上記に伴ってスキルの状態異常ディレイをamotion分に変更 (skill.c)
　※どうやら、アイテムボーナスにのみamotion+500分のディレイが入るようです。

・移動速度、攻撃速度計算の部分を若干最適化 (status.c)

----------------------------------------
//0818 [2011/01/10] by popori

・スキル「メテオストーム」「ロードオブヴァーミリオン」「ストームガスト」以外にはamotion+500分のダメージディレイを入れるように変更 (battle.c)
　※大魔法以外にもダメージディレイがamotion分のみのスキルは存在するとは思いますが、後日。

・上記の変更に伴って3次職スキルにも状態異常ディレイを入れる (skill.c)

・pakcet_db.txtの更新 (packet_db.txt)

----------------------------------------
//0817 [2011/01/09] by popori

・一部のスキルの追加効果の際の状態異常にamotion+500のディレイを入れる (skill.c)
　※本家ではダメージを受けて表示から実際にHPが減るまでのディレイが発生するスキル全てに状態異常付与判定の際amotion+500のディレイが存在します。
　　逆にamotion+500のディレイが発生しないスキルは基本的に、ダメージ処理を行わないスキル・大魔法です。
　　また、通常攻撃にもHPが実際に減るまでのディレイにamotion+500の値を使っているので、同様にカードによる状態異常付与にもディレイを加えています。
　　今回の変更では、3次職スキルの扱いが分からないため変更していません。

・NULLを参照する可能性がある箇所を修正 (status.c)
　NP3228さんに感謝

・ホムの攻撃速度補正を少し修正 (homun.c)

・0816の条件式を少し修正 (battle.c)

・パケット情報の追記 (client_packet.txt)

----------------------------------------
//0816 [2011/01/08] by popori

・攻撃時に追加状態異常判定を行う際、ダメージが0になっても回避判定が無ければ状態異常判定を行うように変更 (battle.c)

・スキル「SM_SELFPROVOKE」を少し修正、ついでにitem_db.txtを少し修正 (skill.c item_db.txt) 

・スキル「クァグマイア」BOSS無効の変更を有効に変更し、状態異常「SC_SPEEDUP1」のflagを調整 (scdata_db.txt)
　めろでぃさんに感謝

・0813のチェイスウォークの条件式を変更 (status.c)

----------------------------------------
//0815 [2011/01/08] by popori

・NPCスキル「速度強化」で使用する状態異常は本家で速度変化ポーションと同じなので、同様に変更する (skill.c status.c)

・上記の変更に沿って状態異常「SC_SPEEDUP1」の仕様を変更 (scdata_db.txt status.c)

・スキル「クァグマイア」はBOSS無効に変更 (scdata_db.txt)

・MOBの攻撃速度に関して少し修正 (status.c)

----------------------------------------
//0814 [2011/01/08] by popori

・battle_auriga.confのASPD関連の読み込み部分を修正 (battle.c)

・攻撃速度ポーションの挙動を少し修正 (status.c)

・移動速度増加アイテムの挙動を本鯖使用に修正 (scdata_db.txt)

・ItemID 662の馬牌の効果を変更し忘れたので修正 (item_db.txt)

----------------------------------------
//0813 [2011/01/07] by popori

・移動速度に関連する計算式を本家仕様に修正(リニューアル以前のもの)
　※この変更に伴って、item_db.txtの修正も若干行いました。
　　SpeedRateが使われている装備は全てvalを25に統一。
　　移動速度が変化するアイテムを追加。
　　速度変化ポーションの効果を実装。

　　ただし、各状態異常のセーブ可否等は分からないので適当に設定してあります。(scdata_db.txt)

　　3次職スキルの移動速度関連の挙動は分からなかったので、憶測で処理の箇所を変更しています。

----------------------------------------
//0812 [2011/01/06] by popori

・攻撃速度に関連する計算式を本家仕様に修正(リニューアル以前のもの)
　※攻撃速度関連に関連する計算式の処理を本家仕様に変更しました。
　　全てのユニットの攻撃速度の計算式が恐らく正しい物になっているかと思います。
　　この変更によって以下のbattle_auriga.confの仕様が変更されます。
　　monster_max_aspd
　　max_aspd
　　pk_max_aspd
　　gvg_max_aspd
　　pvp_max_aspd

　　従来の仕様はASPD上限を決めるだけのものでしたが、今回のパッチで以下の仕様に変更されます。
　　最大秒間攻撃速度
　　ms単位で決めることが出来ます。
　　デフォルトの状態は全て200です。
　　200/1000[ms] = 1/5となり、1秒間で攻撃出来る最大回数は5回=ASPD190となります。

　　また、一部の状態異常の削除を行いました。
　　SC_SPEEDPOTION3　SC_POISONPOTION
　　これらの状態異常は全てSC_SPEEDPOTION2に置き換わっています。

　　上記に伴って、item_db.txtの修正も若干行いました。
　　AspdRateが使われているものは全てAspdAddRateに変更。
　　FixAspdが使われていたものは全てbAspdAddRateに変更。
　　攻撃速度増加系のポーションの状態異常付与を若干変更。

　　3次職スキルの攻撃速度関連の挙動は分からなかったので、憶測で処理の箇所を変更しています。

----------------------------------------
//0811 [2010/12/18] by popori

・signedとunsignedの比較のwarningを修正 (booking.c map.h)
　NP3228さんに感謝

・ドキュメントの一部を更新 (client_packet.txt inter_server_packet.txt)

----------------------------------------
//0810 [2010/12/18] by popori

・パーティーブッキングシステムの実装
　※パーティーブッキングの検索機能ですが、検索の際の職業が明らかにおかしいIDをクライアント(使用したクライアントは2010-07-30)が送ってきています。
　　詳細は「それぞれ違う職業なのに、同じIDが送られてくる」
　　ex)ノービス=2 防御=2

　　とても仕様とは思えないので、クライアントのバグだと思います。
　　これに関してはサーバー側のバグではないので注意して下さい。

----------------------------------------
//0809 [2010/12/06] by popori

・スキル「インティミデイト」の計算式を修正 (battle.c)

・SC_SUMMER SC_SANTAをセーブするように変更 (scdata_db.txt)

・スキル「スティールコイン」の獲得Zenyの計算式を本家仕様に修正 (pc.c)

・スキル「*****ストリップ」の効果時間計算式を本家仕様に修正 (skill_cast_db.txt skill.c)

・スキル「武器精錬」の成功確率計算式を本家仕様に修正 (status.c skill.c)

・スキル「ストリップウェポン」「ストリップシールド」「ストリップアーマー」「ストリップヘルム」の成功率計算式を間違えていたので再度修正 (skill.c)

・アイテムボーナスによって歩行速度が変化する際、change_speedフラグをセットするように修正 (status.c)
　pneumaさんに感謝

----------------------------------------
//0808 [2010/12/06] by popori

・0806の状態異常に関する修正の続き (skill.c status.c)
　「石化」「凍結」「スタン」「沈黙」
  「毒」「出血」「睡眠」「暗黒」「呪い」
  「混乱」「猛毒」「誘惑」
   上記状態異常に関連するスキルごとの基本確率を本家仕様に修正
　※全てリニューアル以前のものです。
　　3次職スキルはノータッチ。

・スキル「レックスディビーナ」の沈黙付与基本時間を間違えていたので修正 (skill_cast_db.txt)

・SC_SANTA SC_SUMMER SC_WEDDING時のパケットのプロセスを本家仕様に修正 (status.c)

・スキル「ストリップウェポン」「ストリップシールド」「ストリップアーマー」「ストリップヘルム」の修正 (skill.c)
 ->使用者と対象者でDEX差がマイナスになった場合0に補正していた部分を削除
 　めろでぃさんに感謝
 ->成功確率計算式を本家仕様に修正

・スキル「フルストリップ」の成功確率計算式を本家仕様に修正 (skill.c)

・スキル「スティールコイン」の成功確率計算式を本家仕様に修正 (pc.c)

・スキル「タロットカード」の各効果の確率を本家仕様に修正 (skill.c)

----------------------------------------
//0807 [2010/12/04] by popori

・0806の状態異常に関する修正の続き (skill_cast_db.txt skill.c status.c)
 ->石化の持続時間計算式を修正
 ->凍結の持続時間計算式を修正
 ->スタンの持続時間計算式を修正
 ->沈黙の持続時間計算式を修正
 ->毒の持続時間計算式を修正
 ->出血の持続時間計算式を修正
 ->睡眠の持続時間計算式を修正
 ->暗黒の持続時間計算式を修正
 ->呪いの持続時間計算式を修正
 ->混乱の持続時間計算式を修正
 ->猛毒の持続時間計算式を修正
 ->各スキルごとの上記状態異常の基本時間を本家仕様に修正
 ※全てリニューアル以前のものです。
 　3次職スキルはノータッチ。

・0806の0x7e1に関する修正を再度修正 (clif.c client_packet.txt)
　ARIAさんに感謝

・0802のアイスウォールの修正を更に修正 (skill.c)
　めろでぃさんに感謝

----------------------------------------
//0806 [2010/12/01] by popori

・一部状態異常の計算式を本家仕様に変更 (status.c)
 ->石化の発生確率計算式を修正
 ->凍結の発生確率計算式を修正
 ->スタンの発生確率計算式を修正
 ->沈黙ンの発生確率計算式を修正
 ->毒の発生確率計算式を修正
 ->出血の発生確率計算式を修正
 ->睡眠の発生確率計算式を修正
 ->暗黒の発生確率計算式を修正
 ->呪いの発生確率計算式を修正
 ->混乱の発生確率計算式を修正
 ->猛毒の発生確率計算式を修正

 ※これらの状態異常持続時間も本家と処理が大分違うので、後日修正します。
 　なお、これらの計算式修正はリニューアル以前のものです。

・スキル「ストームガスト」の凍結確率を修正 (skill.c)

・一部定数の定義名が分かりづらかったので変更する (pc.* status.*)

・reloaditemdbを行った際read_petdb()を呼び出すように変更 (atcommand.c)
　cleaqさんに感謝

・スキルレベルを上げた際スキルがパッシブスキルに変わってしまうのを修正 (clif.c)
　NP3228さんに感謝

・一部のパケット区切りを修正 (clif.c client_packet.txt)

・clif_skillinfo()をstaticで隠蔽 (clif.*)

・スキル「ストリップヘルム」の対モンスター効果をINT40％減少に変更 (status.c)
　めろでぃさんに感謝

・エンジェラス時クライアントが終了出来ないのを修正 (pc.c)
　ARIAさんに感謝

・スキル「エンチャントデッドリーポイズン」の攻撃力上昇分を修正 (battle.c)
　めろでぃさんに感謝

・2010-11-30aRagexeREの解析結果を基にパケット情報の追記 (packet_db.txt client_packet.txt)
　※パケット長の追記を行っていますが、現状読み込ませる必要が無いと考え、MAX_PACKET_DBの拡張は行っていません。

----------------------------------------
//0805 [2010/11/23] by Blaze

・武器種の定義値を変更(map.h, pc.c, status.c, battle.c)
　-> ガトリングガンとショットガンの定義値を入れ替え
　-> 両手杖の武器種を新規追加

・上記の武器種変更によるDB修正(job_db1.txt, size_fix.txt, item_db.txt, skill_require_db.txt)

・DB仕様変更によるdoc修正 (db_ref.txt)

----------------------------------------
//0804 [2010/11/16] by Blaze

・モロクNPC追加 (npc_town_morocc.txt)
　-> 運命のカラスクエスト実装

・運命のカラスクエスト関連のNPC修正(npc_town_prontera.txt)

・運命のカラスクエスト関連のwarpを修正 (npc_warp_fild.txt)

----------------------------------------
//0803 [2010/11/16] by Blaze

・モスコビアNPC追加 (npc_town_moscovia.txt)
　-> 泣き虫のミハイル、ババヤガの魔術クエスト実装

・モスコビアクエスト関連のwarpを修正 (npc_warp_dun.txt)

----------------------------------------
//0802 [2010/11/12] by popori

・0801のコンパイル警告を修正 (map.h)
　NP3228さんに感謝

・アイスウォール設置上のセルに対してスキルユニットを設置出来ないように変更 (skill.c)
　めろでぃさんに感謝

・ガンバンテインの削除対象スキルを追加 (skill.c)

・0801の水場チェックにホムと傭兵が抜けていたので追加 (skill.c)

・2010-11-09aRagexeREの解析結果を追加 (packet_db.txt client_packet.txt)

----------------------------------------
//0801 [2010/11/12] by popori

・map_session_dataのメンバの一部を構造化する
　(atcommand.c battle.c clif.c guild.c map.h party.c pc.c script.c skill.c status.c trade.c unit.c vending.c)

・スキルポイント割り振り時に0x10fを送信するのはPACKETVERが12以下の時にのみにする。 (pc.c)
　※調査してみたところ、古い時期(少なくとも新スキルウインドウ実装以前)からスキルポイント割り振り時に0x10fを送信しない模様。
　　とりあえず暫定でPACKETVER12以下のみ送信するよう変更しました。(正確な日付の特定が難しい・・・)
　　多少の通信量削減にも繋がると思います。

・スキルユニットの使用IDを本家に合わせる (skill.* skill_unit_db.txt)

・SC_ANGELUSにOPT2_ANGELUSをセットするよう変更 (status.c)

・skill_db.txtのinfの項目をテーブルを用意し、そちらを使うように変更 (skill.* battle.c clif.c mob.c pet.c status.c unit.c)
　※inf2もやろうかと思いましたが、少しゴチャゴチャしていたので今回は変更無し

・スキル「フロストノヴァ」「雷撃砕」「氷柱落し」をスキルユニット設置型に変更する (skill.c skill_unit_db.txt)

・スキルユニット設置型のスキルの処理を変更 (skill.c skill_unit_db.txt)
　※layoutとrangeの変更が主です。ゴスペルのみflagを変更し、効果が重複しないようにしました。
　　3次職スキルは詳細不明なのでノータッチ。

・スキル「ランドプロテクター」の仕様を本家仕様に修正する (skill.c)
 ->水場セルにランドプロテクターのセルが重なっていた場合、そのセルは水場として機能させないように
 ->ランドプロテクターの効果適用外のスキルにトラップ(トーキーボックス、3次職トラップ除く)、イービルランド、ヘルモードの杖を追加
 ->ランドプロテクターの効果をスキルユニットの削除、スキルユニットの生成の妨害へ効果変更
 　めろでぃさんに感謝

・その他細かい修正 (clif.c skill.c)

----------------------------------------
//0800 [2010/11/02] by popori

・0799の続き (status.c)
 ->OPT2_BLOODINGをセットするのはSC_SIGNUMCRUCISではなくSC_BLEEDに変更
 ->SC_SANTA中はOPTION_SANTAをセットするように変更
 ->SC_SUMMER中はOPTION_SUMMERをセットするように変更
 ->SC_WEDDING中はview_classに22をセットするように変更

・キャノンボールのtypeを10→19へ変更 (item_db.txt)

・0798の処理を少し変更 (battle.c)

----------------------------------------
//0799 [2010/11/01] by popori

・オプション系列の整理と本家の仕様に近づける (atcommand.c battle.c clif.c homun.c merc.c mob.c npc.c pc.* pet.c skill.c status.* unit.c vending.c)
 ->opt1の数値を直接指定せず、enumを用いてセットするようにする OPT1_*****
 ->opt2の数値を直接指定せず、enumを用いてセットするようにする OPT2_*****
 ->opt3の数値を直接指定せず、enumを用いてセットするようにする OPT3_*****
 ->optionの数値を直接指定せず、enumを用いてセットするようにする OPTION_*****
 ->色違いドラゴン騎乗時アイコンが出ないのを修正
 ->clif_parse_ActionRequest()内の条件式で発火を除外する
 ->スキル「ホワイトインプリズン」で状態異常を付与する際OPT1_IMPRISONをセットするように変更し、一部判定はSC_WHITEIMPRISONからOPT1_IMPRISONで行うよう変更
 ->スキル「ウィンドカッター」で状態異常を付与する際OPT2_FEARをセットするように変更
 ->スキル「オーラブレイド」で状態異常を付与する際OPT3_AURABLADEをセットするように変更
 ->スキル「月明かりの下で」を演奏中OPT3_MOONをセットするように変更
 ->スキル「分身の術」で状態異常を付与する際OPT3_BUNSINをセットするように変更
 ->スキル「不死属性付与」で状態異常を付与する際OPT3_UNDEADをセットするように変更

----------------------------------------
//0798 [2010/10/30] by popori

・アイテムボーナス「bonus2 bDefEleEnemy」を使用するアイテムのscriptを追加 (item_db.txt)

・該当アイテムの効果を実装 (battle.c mob.* status.* scdata_db.txt item_db.txt)
　マヌクの豪気
　マヌクの意思
　ピンギキュラの果実ジャム
　ルシオラヴェスパのハチ蜜
　マヌクの信念
　コルヌスの涙

----------------------------------------
//0797 [2010/10/29] by popori

・課金濃縮エルニウム、オリデオコン専用精錬NPCの暫定実装 (npc_misc_refine.txt)
　pneumaさんに感謝

----------------------------------------
//0796 [2010/10/28] by popori

・script.cの装備箇所をenum化 (script.c)
　NP3228さんに感謝

・武器かどうかの判定はitemdb_isweapon()で判定するようにする (atcommand.c battle.c clif.c itemdb.* pc.c script.c skill.c status.c storage.c)
　NP3228さんに感謝

・防具かどうかの判定はitemdb_isarmor()で判定するようにする (atcommand.c battle.c clif.c itemdb.* pc.c script.c status.c storage.c)

----------------------------------------
//0795 [2010/10/27] by popori

・装備箇所のコードをenumにする (battle.c clif.c itemdb.h pc.c script.c skill.c)

・上記の変更に伴いEQP_****は廃止してLOC_****に統一する (map.h battle.c skill.c)

・clif_storageitemlist_sub()、clif_cart_itemlist()内で矢・弾丸・苦無・手裏剣・キャノンボールのチェックを行い該当した場合0x8000を送るように変更 (clif.c)

・頭装備のtypeをdb_ref.txtに従って変更する (item_db.txt)

・item_typeの9を風魔手裏剣→両手武器へ変更 (item_db.txt db_ref.txt)

・スキル「サイトブラスター」の修正 (status.c)
　めろでぃさんに感謝

・細かい修正 (clif.c itemdb.c)

・2010-10-27aRagexeREの解析結果を基にパケット長の追記 (packet_db.txt)

・スキル「石投げ」「砂まき」の最低ディレイにamotionを保証するよう変更 (skill_db2.txt)

----------------------------------------
//0794 [2010/10/26] by popori

・0792で追加したitem_typeのenumをmap.hからitemdb.hへ移動 (map.h itemdb.h)

・script.cのenumと衝突してしまうので、item_typeのenumをTYPE_****からITEMTYPE_*****へリネーム (atcommand.c battle.c clif.c itemdb.* map.h mob.c npc.c pc.c script.c skill.c status.c storage.c)
　Arocさんに感謝

・ペットの卵とペットアクセサリーの判定をtypeで行わずflagで判定するように変更する (atcommand.c clif.c item_db.* pet.c mob.c npc.c script.c)
　※従来のペットの卵とペットアクセサリーの判定方法はitem_db.txtのtype項に7、8を設定していましたが
　　今回からはpet_db.txtのEggID、AcceIDから自動で該当アイテムに対してフラグを設定するように変更しました。
　　サーバー独自のペット、ペットアクセサリーを定義している方は該当アイテムに対してitem_db.txtのtypeを7、8→4へ変更して下さい。
　　今後typeの7、typeの8はペットの卵、ペットアクセサリーとして使用しません。　

・ペットの卵とペットアクセサリーのtypeを4に変更する (item_db.txt db_ref.txt)

・item_typeの8を弓として使うように変更する (item_db.txt)

・0792以降itemdb_isequip3()が常に真を返すバグを修正 (itemdb.c)
　NP3228さん、mucheyさんに感謝

----------------------------------------
//0793 [2010/10/25] by popori

・item_typeの説明を追加 (db_ref.txt)

・item_db.txtの修正 (item_db.txt)

----------------------------------------
//0792 [2010/10/25] by popori

・client_packet.txtの更新 (client_packet.txt)

・item_typeを本家仕様に修正、ついでにitem_typeのenumを追加する (db_ref.txt item_db.txt atcommand.c battle.c clif.c itemdb.c map.h mob.c npc.c pc.c script.c skill.c status.c storage.c)
　※この変更で武器と防具のitem_typeが従来の仕様と逆になります。
　　旧)武器:4 防具:5
　　新)防具:4 武器:5
　　オリジナル装備品を実装しているサーバーは各自新しいitem_typeに沿って変更して下さい。
　　詳細はdb_ref.txtのitem_db.txtの項を参照のこと。

----------------------------------------
//0791 [2010/10/23] by Rayce

・battle.cを少しリファクタリング（battle.c）

・TXT: ジャーナルのロード時、バージョンとファイルサイズが不一致している場合は
       abort() するように0704以前の実装に巻き戻す（journal.c）
       バージョンが合わないときは、一旦古いバージョンでジャーナルデータをセーブ
       データに移してから新しいバージョンを使うこと

----------------------------------------
//0790 [2010/10/22] by popori

・0789のファルコンアサルトの変更を少し修正 (battle.c)

・スキル「S.B.R.44」の射程を無制限に変更 (skill_db.txt)
　tomoさんに感謝

・char.cのPACKETVERの分岐を少し変更 (char.c)

----------------------------------------
//0789 [2010/10/22] by popori

・client_packet.txtの更新 (client_packet.txt)

・2010-10-20aRagexeREの解析結果を基に新規追加パケット分の情報を追記 (client_packet.txt)
　※クライアントから見て受信するパケットのみ。
　　swtich tableに分岐は存在しているが0x845、0x847、0x849は処理が無いので多分未実装？
　　0x84bの処理は存在している

・packet_dbに2010-10-20aRagexeREまでのパケット長を追記 (packet_db.txt)

・ホムンクルスはシーズのダメージ補正を適用しないように変更 (battle.c)

・アイテムボーナス「bonus2 bAddCastRate」の詠唱時間削減を加算→乗算に変更 (skill.c)
　crisp.さんに感謝

・スキル「サイトブラスター」の範囲を3×3に変更 (status.c)
　めろでぃさんに感謝

・状態異常｢発火｣中アイテムの使用が制限されるのを修正 (clif.c)
　ばるすさんに感謝

・スキル「アースクエイク」に関する変更 (skill_db2.txt battle.c)
 ->レンジフラグを強制遠距離→遠距離に変更
 ->上記の変更に伴い、セイフティウォールを無条件で貫通するように変更

・ワープ時に無条件でディボーションを解除するよう変更 (pc.c)
　ばるすさんに感謝

・スキル「ライフストリーム」「フルリカバリー」のエフェクトをヒールと同じに変更 (skill.c)
　tomoさんに感謝

・スキル「ファルコンアサルト」使用時、付与属性に対しての減衰処理を行うよう変更 (battle.c)
　crisp.さんに感謝
　※付与属性に対してファルコンアサルトの属性が変わるわけではありません。
　　また、この変更よりallow_falconassault_elemet有効時の属性が優先されます。

----------------------------------------
//0788 [2010/10/20] by popori

・0785で追加したadelay/2分の値をディレイとして付与するオプションの削除 (battle.* battle_auriga.conf skill.c)
　※再度デフォルトでディレイ、詠唱が共に0以下のスキルは常にadelay/2分の値をディレイを付与する仕様に戻します。

・PACKETVER28以降装備ウィンドウシステムの表示がおかしくなっていたのを修正 (clif.c)

・client_packet.txtの修正 (client_packet.txt)

・Lyeseさんの情報を基に該当スキルのディレイに最低ディレイとしてamotionを付与する (skill_db2.txt)
　※該当スキル以外は最低ディレイにamotionの付与をさせないように変更しました。
　該当スキルは以下のもの
　バッシュ　ダブルストレイフィング　メマーナイト　ピアース
　メテオストーム　メテオアサルト　気功　発勁　指弾
　爆裂波動　残影　練気功　カートターミネーション
　Lyeseさんに感謝

・アイテムボーナス「bonus2 bAddSpCost」追加 (map.h skill.c pc.c status.c const.txt item_bonus.txt)
　NP3228さんに感謝
　指定スキルnの消費SPをx増加させます。
　ex)
　bonus2 bAddSpCost,5,10;	// スキルバッシュの消費SPを10増加
　bonus2 bAddSpCost,5,-10;	// スキルバッシュの消費SPを10減少

----------------------------------------
//0787 [2010/10/16] by popori

・スキル「ノピティギ」の斜め方向への移動セルを修正 (skill.c)
　ばるすさんに感謝

・VC++ 2010 Express Editionのパスを追加 (vc_make.bat)
　Cocoaさんに感謝

----------------------------------------
//0786 [2010/10/16] by popori

・0785で追加した「bonus2 bDefEleEnemy」の変数初期化し忘れでまずいことが起こっていたので修正 (status.c)

----------------------------------------
//0785 [2010/10/16] by popori

・ディレイに関する仕様変更
 ->ディレイ、詠唱が共に0以下のスキルに対してadelay/2分の値をディレイとして付与するオプションを追加 (battle.* skill.c)
　※従来の仕様ですとディレイ、詠唱が共に0以下のスキルは常にadelay/2分の値をディレイを付与していましたが、デフォルトでは無効にします。

 ->スキルディレイがamotionより小さい場合、amotionを最低値として保証していたのを、skill_db2.txtでスキルごとにスイッチさせるよう変更 (skill.* skill_db2.txt db_ref.txt)
　※0665以降は全てのスキルに対してスキルディレイがamotionより低いとamotionを最低値として設定していました。
　　これをskill_db2.txtで該当スキルのみスキルディレイがamotionより低いとamotionを最低値として保証するように変更します。
　　本来は無効化すべきスキルがあるはずなのですが、情報が集まらずほぼ全てのスキルに対して有効化しています。
　　詳しい情報をお持ちの方は情報提供お願いします。

・client_packet.txtの更新 (client_packet.txt)

・特定属性の敵からのダメージ軽減ボーナス「bonus2 bDefEleEnemy」の追加 (map.h pc.c battle.c const.txt item_bonus.txt)
　ばるすさんに感謝

・0x7faのtypeに合わせてアイテム消去時のtypeを合わせる (atcommand.c battle.c chrif.c clif.* guild.c homun.c mail.c npc.c pc.* pet.c script.c skill.c storage.c trade.c)

・スクリプト命令「announce」に機能不明の"tool"と"micc"を指定出来るように拡張 (clif.c intif.c script_ref.txt)
　※クライアントに定義されているものの、機能が不明。とりあえず指定出来るように拡張しました。

----------------------------------------
//0784 [2010/10/15] by popori

・clif_equipitemack()のPACKETVERの分岐を間違えていたので修正 (clif.c)

・凍結効果を付与する物理スキルが凍結を成功させても即座に割れてしまう問題を修正 (battle.c skill.c)
　ばるすさんに感謝

・スキル「フリージングトラップ」をBF_MISCからBF_WEAPONに変更 (skill.c skill_db.txt)

・client_packet.txtの更新 (client_packet.txt)

・現行最新のクライアントまでのパケット長を追記 (packet_db.txt)

・0769で追記したmerc_db.txtの定義はホムンクルスSの定義だったのでhomun_db.txtに移動させる (merc_db.txt homun_db.txt)

・アイテムボーナス「bDoubleAddRate」「bAddStealRate」の仕様を右手のみ適用から両手に適用に変更 (battle.c pc.c)
　kleinさんに感謝

----------------------------------------
//0783 [2010/10/11] by Rayce

・MAPサーバが複数ある場合、異なるMAPサーバに移動すると
  太陽と月と星の感情を上書き登録出来てしまうバグを修正（skill.c）
		reported by うに〜くさん

・doc/client_packet.txtを一部修正
  それに伴い、一部のパケット区切りを変更（clif.c）

----------------------------------------
//0782 [2010/10/11] by Rayce

・ダメージが発生する状態異常の効果で死亡したとき、GvGマップやnorevive指定の
  マップの場合に状態異常が解除されないバグを修正（status.c）
		reported by dragontail789

	-> 死亡時に status_change_release() によって状態異常が一旦解除されると
	   sc_data[type].timer の値は-1になっているので、これを用いて既に状態異常が
	   解除済みかどうかを判定可能
	-> 対策を施したのは 出血, 猛毒, パイレックシア, ヘルインフェルノ の4つ

・アイテムボーナスの bAddCriticalDamage によってクリティカルダメージの
  増加率が100%のときに効果が適用できないバグを修正
  0485より前の計算方式に合わせる（battle.c）
		reported by ARIAさん

----------------------------------------
//0781 [2010/10/04] by Rayce

・ユーザ定義関数 callfunc 内のnextやselectにて待機中のプレイヤーに対し取引要請を
  行うと、取引終了後に再度NPCをクリックしたときに直接ユーザ定義関数が実行できて
  しまう致命的な問題を修正（clif.c, map.c, npc.c, script.c）
		reported by dragontail789さん

	-> NPCからデタッチ（npc_event_dequeue）された時点でプレイヤーが持っている
	   スタック情報を破棄する
	-> npc_pos や menu_or_input も同時に初期化することにより、一度デタッチされた
	   プレイヤーが不正にパケットを送りつけてスクリプトを再開するのを予防する

・sleep2待機中のキャラがデタッチされたにも関わらず、sleep2復帰後に再度アタッチ
  された状態で処理を継続できてしまう問題を修正（npc.c, map.h, script.＊）

	-> sleep情報をscript_state構造体から分離してscript_sleep構造体を追加　
	   charidメンバは使用しなくなったので削除
	-> map_session_data構造体に npc_sleep メンバを追加
	   sleep開始時に現在のscript_stateのsleep構造体のアドレスを保存しておく
	-> 取引要請、強制移動、ログアウト/ログインなどによって1度でもデタッチされた場合
	   npc_event_dequeue() で npc_sleep メンバをNULLで初期化しておく
	-> sleep復帰時に npc_sleep のアドレスと比較照合することで、デタッチされているか
	   どうかを判定できる
	   1度でもデタッチされていた場合、デタッチ状態のままsleep2処理は続行可能

・sleep復帰処理とawake復帰処理を run_script_awake() に集約（script.c）

・sleep2待機中にキャラがログアウトされたとき、sleep2の復帰後に st->rid を 0 に
  初期化してデタッチするように修正（script.c）
		based on eA, thx a lot!!

・sleep復帰後、RERUNLINEでない場合は即座にスクリプトを終了するように強化（script.c）
		based on eA, thx a lot!!

----------------------------------------
//0780 [2010/09/28] by Rayce

・メモリマネージャのブロックサイズを40KB→48KBに拡張（malloc.c）
	-> map_session_data構造体のsizeofが40KBを超過しており、メモリマネージャの
	   ブロックに収まりきらないという事象が発生していたため
	-> メモリの分布を簡単に計測してみると、2KB以下の小さなアロケートがほとんどで
	   比較的大きいアロケートはあまり実施されていない模様
	   実施されていたとしても、サーバ起動直後の初期化時であり、継続的な運用下では
	   頻繁にアロケートされないものと予測

----------------------------------------
//0779 [2010/09/23] by Rayce

・/common/zlib のバージョンを1.2.2から1.2.5にアップグレード

・Windows環境において、grfio_final() の後に再度 grfio_load_zlib() を
  呼び出したときに zlib.dll を再ロードできるように修正（grfio.c）

・Windows環境下において、zlibのバージョン番号は zlib.h からではなく
  zlib.dll内部で定義されている番号を zlibVersion() から取得するように修正（grfio.c）

・grfio_load_zlib() の初回呼び出し時に、現在ロードしているzlibの
  バージョンを表示するように追加（grfio.c）

----------------------------------------
//0778 [2010/09/20] by Rayce

・SQL: MySQLの wait_timeout による接続のタイムアウトを抑制するため、
       定期的に mysql_ping() を発行する仕組みを実装
		based on eA, thx a lot!!

	→ login_auriga.conf, char_auriga.conf, map_auriga.conf にそれぞれ
	   keepalive （単位は秒）の項目を追加。
	   この指定時間間隔でMySQLに対してpingを発行する。

	→ MySQL自体で設定されている wait_timeout よりも短い時間にすること。
	   デフォルトは「8時間から10分引いた」値で 28200 としている。

	→ keepalive を 0 にした場合は、定期的な mysql_ping() の発行は行わない

・SQL: NPCスクリプト関数 strescape が、Databaseの文字セットを考慮した上で
       文字列のエスケープ処理が出来るように改善（sqldbs.*, script.c）

----------------------------------------
//0777 [2010/09/20] by Rayce

・numdb_exists(), strdb_exists(), linkdb_exists() を追加（db.*）
	→ キーが含まれているかどうかだけを判定します。
	   内部処理は search と同じ。
       値にNULLが格納されている場合でも存在可否をチェックしたいときに利用します。

・db_search の代わりに db_exists を使うように変更
  （battle.c, chat.c, friend.c, mob.c, pc.c, script.c）

----------------------------------------
//0776 [2010/09/20] by Rayce

・LP64（64bit UNIX/Linux）正式対応
	→ long型は64bitになる可能性があるので、32bitのサイズが必要な場所ではlong型ではなく
	   int型を使うよう全面的に変更

	→ 8bit/16bit/32bitの明確な固定長の型が必要な場合は、int8/int16/int32型もしくは
	   uint8/uint16/uint32型を利用する

	→ "warning: cast to pointer from integer of different size" という警告が発生するので
	   数値をポインタにキャストする場合は INT2PTR マクロを利用する
	   unsignedな数値をポインタにキャストする場合は UINT2PTR マクロを利用する

	→ "warning: cast from pointer to integer of different size" という警告が発生するので
	   ポインタをint型にキャストする場合は PTR2INT マクロを利用する
	   ポインタをunsigned int型にキャストする場合は PTR2UINT マクロを利用する

----------------------------------------
//0775 [2010/09/20] by Rayce

・gccの警告 "may be used uninitialized in this function" を修正（int_party.c, battle.c）
・gccの警告 "unused variable" を修正（clif.c）

----------------------------------------
//0774 [2010/09/19] by Rayce

・NPCスクリプト実行過程で「run_func: not function and command!」が発生したとき、
  デバッグのためのヒントとして func_no と func_type を出力するように拡張（script.c）

・createaccount.php でユーザアカウントを作成するとき、入力したメールアドレスが
  無視される不具合を修正（tool/php/createaccount.php）

・TXT: アカウント情報 auth_dat をreallocで伸張するときは、memsetで初期化する（login.c）
		reported by 辻にゅまさん

----------------------------------------
//0773 [2010/09/19] by Rayce

・ポイズニングウェポンとリーディングスペルブックのアイテムIDを後々容易に
  拡張できるようにリファクタリング（clif.c, skill.c）

・clif_hpmeter() の内部処理を一括集約（clif.c）

・skill.cの全体的な細かい整形（skill.c）

・細かいリファクタリング
	battle_calc_damage()
	intif_GMmessage()
	status_change_hidden_end()

----------------------------------------
//0772 [2010/09/19] by Rayce

・clif_move() の歩行パケット送信部分を clif_move_sub() として分離して見通しを良くする（clif.c）
・clif.cの全体的な整形（clif.c）

----------------------------------------
//0771 [2010/09/19] by Rayce

・PC→MOBの敵味方判定処理の最適化（battle.c）
・アイテム関連のパケットを作成する際、ペットの卵かどうかを判定する処理を最適化（clif.c）

----------------------------------------
//0770 [2010/09/19] by Rayce

・魔法による反射ダメージのアクティブアイテムにおいて、battle_auriga.confの
  magic_reflect_autospell を参照するように修正（battle.c）

・フィアーブリーズの発動確率の計算式を一般式化（status.c）

・マーダラーボーナスの経験値倍加計算を0717以前の形に戻す（pc.c）

  ※わざわざ __BORLANDC__ で条件分岐する必要があり、しかも BIGNUMBER_DOUBLE が考慮されてないため
  ※コンパイラの最適化オプションが有効に作用していれば <<= も *= も同じアセンブラコードが
    生成されるようなので、ビットシフトに変更することによる高速化は期待できないため

----------------------------------------
//0769 [2010/09/15] by popori

・2010-09-08RagexeREの解析結果、eAからの情報を基にパケット情報の追記 (client_packet.txt)
　※未調査の物はパケットの区切りだけ解析した結果なので、何の機能のパケットなのか不明です。
　　調査出来る方は穴埋めお願い致します。

・2010-07-30aRagexeREまでのパケット長を追加 (packet_db.txt)

・クライアントに傭兵の定義が追加されていたので、merc_dbにコメントアウトで追加しておく (merc_db.txt)

・2010-07-30aRagexeREまでのクライアントに対応 (char.c bcc32_make.bat Makefile vc_make.bat *.dsp)
　※この更新に伴いPACKETVERの引き上げを行いました。
　　古いクライアントを使う際は使用するクライアントの日付に合わせてPACKETVER、packet_db.txtを編集して下さい。

・0766以降intif_GMmessage()でinterサーバーが落ちる問題を修正 (intif.c)
　ばるすさんに感謝

・eAを参考に不正対策の強化 (clif.c)

----------------------------------------
//0768 [2010/08/23] by popori

・gcc4.3.4環境下でのコンパイル警告を一部修正 (inter.c clif.* intif.* script.c)

・anti hackerのコードを更新 (clif.c)
 ->GMでないキャラが他人に赤エモを付与出来るexploitの修正

・docの修正と追加 (client_packet.txt script_ref.txt db_ref.txt)

・packet_db.txtの修正ついでにGM右クリックメニューの全ての装備を解除機能を実装 (packet_db.txt clif.c)

・item_db.txtのtypeを本家仕様に修正 (clif.c item_db.c)
　※追加されたtypeに合わせてソースを変更しただけなので、item_db.txtの変更はまだ未着手・・・。

・PCが死亡時にコインも削除するよう変更 (pc.c)

・スクリプト関数「checkwolf()」「checkwolfmount()」を追加 (script.c script_ref.txt)
　tomoさんに感謝

----------------------------------------
//0767 [2010/08/06] by popori

・0766の不要なコメントアウトが入ってしまったので削除 (clif.c)

----------------------------------------
//0766 [2010/08/05] by popori

・アナウンスパケットを本家仕様に修正 (inter.c atcommad.c clif.* intif.* script.c script_ref.txt)
　※この変更に伴いスクリプト命令「announce」「mapannounce」「areaannounce」の仕様が若干変わりましたので、script_ref.txtをお読みください。

・拳聖の融合状態のスキル攻撃によるオートスペル発動は温もりに限らず発動するよう変更 (battle.c)

・一定時間が経つと3次職スキルが使用不能になるバグを修正 (pc.c)

・item_typeの更新 (db_ref.txt)

・client_packet.txtの更新 (client_packet.txt)

----------------------------------------
//0765 [2010/07/30] by popori

・0762のpk_noshiftの仕様変更を少し修正 (clif.c)

・0764の多段HITスキルの挙動を一旦削除 (battle.c)

・clif_announce()を少し修正 (clif.c)

----------------------------------------
//0764 [2010/07/28] by popori

・HPをLongWordで送る場所はHPのチェックは不要なので削除する (char.c clif.c)

・多段HIT系スキルにHIT時、しばらくの間移動不能時間を付ける (battle.c)
　※以前eAと本家で調査をしたのですが体感数値なので、多少の誤差があると思います。

・0762のデスバウンドの反射の条件式を間違えていたので修正 (battle.c)

・デスバウンドの反射は対象者と向かい合っていなければ発動しないように修正 (battle.c)

・スクリプトでClassの参照にconst.txtの定数を用いていない箇所を修正 (npc_quest_skillget1.txt)

・Blazeさんの情報を元にリーディングスペルブックの最大スロット数を7に変更 (map.h)
　Blazeさんに感謝

----------------------------------------
//0763 [2010/07/28] by popori

・料理リストパケットの実装 (clif.* script.c packet_db.txt client_packet.txt)

・メール選択受信の未判明パケットの部分を穴埋め (clif.c)

・スキル「サイトブラスター」の効果範囲を5*5に変更 (status.c)

・死亡時には気孔を消すように変更 (pc.c)

・スキル「寸勁」の効果を修正 (skill.c)
 ->範囲を3*3から5*5に変更
 ->ノックバック距離を5に変更

----------------------------------------
//0762 [2010/07/28] by popori

・alucardさんの情報を元にシーズモードのダメージ補正を本家と同様に修正する。 (battle.* battle_auriga.conf)
　alucardさんに感謝
　※この変更により、一部battle_auriga.confの仕様が変更されます。

	gvg_short_attack_damage_rate
	gvg_long_attack_damage_rate
	-> これら2つは通常攻撃のみの倍率に適用されます。

	新規追加フラグ
	gvg_normal_attack_damage_rate
	-> このフラグはシーズモードMAPの物理攻撃スキルの倍率に適用されます。

・PKMAPも同様のシーズダメージ補正のようなので、上記の変更を加える。 (battle.* battle_auriga.conf)
　※上記と同様に、一部battle_auriga.confの仕様が変更されます。

	pk_short_attack_damage_rate
	pk_long_attack_damage_rate
	-> これら2つは通常攻撃のみの倍率に適用されます。

	新規追加フラグ
	pk_normal_attack_damage_rate
	-> このフラグはPKモードMAPの物理攻撃スキルの倍率に適用されます。

・リーディングスペルブックのスロット数計算式をマージ (map.h skill.c)
　pneumaさんに感謝

・トワイライトファーマシー３が使用不能なのを修正、フリップザコインも修正 (skill_require_db.txt)
　hanasakiさんに感謝

・0761のスパイラルピアースの移動不可効果が機能しないので、とりあえず削除 (skill.c)
　※騎士スレテンプレによると、SC_ANKLEの効果が短時間にかかってる模様？

・client_packet.txtの更新 (client_packet.txt)

・clif_initialstatus()の修正 (clif.c)

・clif_changeoption()のパケット仕様を本家に合わせる (clif.c)

・新歩行パケットは最後にintにキャストするのではなく、最初からintにキャストして受け取るように変更 (clif.c)

・battle_auriga.confのpk_noshiftの仕様を若干変更する。 (clif.c)
　※pk_noshiftが有効時はPKMAPにもPvPのランクが表示される仕様でしたが、本家の仕様と離れてしまうため変更を加えました。
　　今後はpk_noshift有効時でもPvPのランクは表示させない仕様に変更します。

・デスバウンドの反射はBOSS属性には無効に変更 (battle.c)

----------------------------------------
//0761 [2010/07/27] by Lyese

・スパイラルピアースに1秒間の移動不可能効果を追加

・ガンバンテインによるユニット削除の効果対象スキルを追加

・ソウルブレイカー、ベナムナイフに状態異常カードが乗らないように修正

----------------------------------------
//0760 [2010/07/09] by popori

・バーサーク中オートスペルが発動するように変更 (clif.c)
　ばるすさんに感謝
　※三段掌やスナッチャーを習得時にも効果が発動しますが、本家で装備品「ひよこちゃん」装備時バーサーク中でもDAが出ることから仕様ということで。

・毒薬の瓶の状態異常がディスペル、ゴスペルの全状態異常解除で解除されないので変更。ログアウト時の挙動が分からなかったので、とりあえずASPD増加系のPOTと同じように。 (scdata_db.txt)

・スキル「魔法力増幅」の効果を修正 (skill_db.txt skill_cast_db.txt status.c)
　->持続時間を30秒に変更
　->詠唱キャンセルされるように変更
　refisさんに感謝

・AutoActiveItemに関する変更 (battle.c)
　->weapon_reflect_autospell有効時、反射ダメージでも発動するように変更
　->物理スキル攻撃でも発動するように変更
　unsyuさんに感謝

・PACKETVER24以下の時のパーティーリーダー変更のメッセージをPTメンバー全員にメッセージを出すよう変更。
　パーティー情報窓を出すので、あなたがパーティーリーダーになりました。というメッセージは不要と考え削除。
　(msg_auriga.conf party.c clif.c)

----------------------------------------
//0759 [2010/07/03] by popori

・0755の修正 (clif.c)

----------------------------------------
//0758 [2010/06/26] by popori

・0757を少し修正 (clif.* party.c)

----------------------------------------
//0757 [2010/06/26] by popori

・パーティーリーダー変更の処理で各MAP鯖に通知を送っていなかった致命的な問題を修正 (int_party.c intif.c party.*)

----------------------------------------
//0756 [2010/06/22] by popori

・スティールの計算式をeAよりマージ (pc.c)

・新露天パケットの処理を少し変更 (packet_db.txt clif.c)

----------------------------------------
//0755 [2010/06/22] by popori

・判明している上位パケットで未実装な物を実装 (clif.c)

・client_packet.txtの修正 (client_packet.txt)

・スキル「ブランディッシュスピア」のディレイを修正 (ckill_cast_db.txt)
　ARIAさんに感謝

----------------------------------------
//0754 [2010/06/21] by popori

・PACKETVER23以上の歩行関連の上位パケットの仕様を出来るだけ本家に近づける (clif.c)
　※この変更は、Auriga-0119の0x86の使用する仕様を変更する形になるので、通信量が増えます。
　　しかし、0x86を使用するとMOB、PETのレベル差によるネームカラーが正常に動作しなくなるので、変更することにしました。
　　ただし、以下の状況ではレベル差によるネームカラーの違いが正常に動作しません。
【MOB、PETが一度も画面内で動かない状況】
　これは本家でも同様の仕様です。
　草や宝箱や卵に対してネームカラーの変更が効かないバグがある模様。
　一度でも画面内でMOB、PETが動けば、正常にネームカラーが変更されます。
　ただし、MOB、PETが動かない状況でも画面内でMOB、PETが沸いた場合はネームカラーが正常に変更されています。

・ペットのアクセサリーが表示されないバグを修正 (clif.c)
　tomoさんに感謝
　※他PCから見てアクセサリーを装備したペットが視界内に入った場合、そのペットが一度も動かないとアクセサリーが表示されません。
　　これは本家でも同様の現象を確認したので、仕様です。

・client_packet.txtの修正 (client_packet.txt)

----------------------------------------
//0753 [2010/06/15] by Cocoa

・txt-converterが正常にコンバート出来ない不具合を修正
	（char-converter.c inter-converter.c login-converter.c）
	※Auriga-0697SnapShotより古いAurigaでの動作は保障しません。

----------------------------------------
//0752 [2010/06/14] by popori

・0751を少し変更 (clif.c)

・client_packet.txtの更新 (client_packet.txt)

----------------------------------------
//0751 [2010/06/14] by popori

・上位歩行パケットを実装しているペットに対しては、髪型を0、髪色を7に、ホムに対しては髪型を0、髪色を8に送るように変更 (clif.c)

----------------------------------------
//0750 [2010/06/14] by popori

・0x7f7 0x7f8 0x7f9は常にレベルを送るように変更 (clif.c)

----------------------------------------
//0749 [2010/06/14] by popori

・PACKETVER23より獲得経験値表示パケットの実装 (clif.* pc.* homun.c merc.c mob.c npc.c party.c script.c skill.c)

・獲得経験値をデフォルトで有効に変更 (battle_auriga.conf battle.c)

・PETの発言やMOBの名前等が化けるのを修正 (clif.c)
　tomoさんに感謝

----------------------------------------
//0748 [2010/06/12] by popori

・装備破損時のメッセージを追加 (clif.* pc.c)

・client_packet.txtの更新 (client_packet.txt)

・既存のパケットで不明な部分を若干穴埋め (clif.c)

・PACKETVER12よりパーティーメンバーアイテム獲得メッセージパケットの実装 (clif.* party.c)

・パーティーメンバーのアイテム獲得メッセージをデフォルトで有効に変更 (battle_auriga.conf battle.c)

・太陽と月と星の奇跡は死亡時解除されないよう変更 (scdata_db.txt)
　ARIAさんに感謝

・ソースの整理 (clif.c party.*)

・PACKETVER25より、パーティーリーダー変更完了パケットの実装 (clif.* party.c)

----------------------------------------
//0747 [2010/06/11] by popori

・0744の修正以降ペットの移動速度が見かけ上異常になっていたのを修正(clif.c)
　tomoさんに感謝

----------------------------------------
//0746 [2010/06/10] by popori

・リネームしたペットの卵に対して「愛されている」と冠詞が付いていなかったのを修正 (clif.c)
　tomoさんに感謝

・ソースの整理 (clif.c)

----------------------------------------
//0745 [2010/06/09] by popori

・ホムのリネームに関する処理を本家仕様に変更 (clif.c)
　tomoさんに感謝

----------------------------------------
//0744 [2010/06/09] by popori

・PACKETVER23より他PCの武器が表示されないバグを修正 (clif.c)
　tomoさんに感謝

・0x7f7、x7f8、0x7f9をPC及びPC型MOB、ペットに限らず通常MOB、ペット、NPC、ホム、傭兵にも適用させる (clif.c)

・client_packet.txtの更新 (client_packet.txt)

・パーティー設定変更を微修正 (clif.c packet_db.txt)

・PACKETVER26よりHPメーター送信の上位パケットを実装 (clif.c)

・スキル「ボウリングバッシュ」「寸勁」のディレイを0に変更 (skill_cast_db.txt)

・PACKETVER20より、倉庫の武器と防具の項が入れ替わって表示されてしまうのを修正 (clif.c)
　※いつからタブ付き倉庫になったのか不明なので、とりあえずPACKETVER20からにしました。

----------------------------------------
//0743 [2010/06/08] by Cocoa

・カクテル・竜の吐息（大）とフベルゲルミルの酒（大）の効果が逆になっている不具合修正 (status.h)

----------------------------------------
//0742 [2010/06/07] by Cocoa

・ギルド未所属のプレイヤーが砦のガーディアンに攻撃するとサーバークラッシュする不具合修正 (battle.c)

----------------------------------------
//0741 [2010/05/30] by popori

・PACKETVERを23未満でコンパイルすると警告が発生するのを修正 (clif.c)

・client_packet.txtの更新 (client_packet.txt)

----------------------------------------
//0740 [2010/05/29] by popori

・現行最新のクライアントに対応に伴いPACKETVERの引き上げ (char.c *.dsp Makefile vc_make.bat bcc32_make.bat)

・0738の修正 (clif.c)

・vc_make.batのコンパイルメッセージを追加 (vc_make.bat)

----------------------------------------
//0739 [2010/05/28] by popori

・0738の変更漏れを修正 (atcommand.c clif.c)

・0733のtypoの修正 (atcommand.c clif.c)

----------------------------------------
//0738 [2010/05/28] by popori

・0x1c3の上位パケット0x40cに対応、0x10eの上位パケット0x7e1対応に伴いPACKETVERを更新 (mmo.h clif.c vending.c skill.c Makefile vc_make.bat bcc32_make.bat *.dsp)

・PACKETVER23より歩行関連の上位パケット(0x7f7 0x7f8 0x7f9)に対応 (clif.c)

・ダイヤモンド交換クエストのアイテムIDが間違っているのを修正 (npc_quest_diamond.txt)
　tomoさんに感謝

----------------------------------------
//0737 [2010/05/24] by popori

・0736以降コンパイルエラーが出ていたのを修正 (clif.c)
　Azuriteさんに感謝

・緑ポーションの効果を変更 (item_db.txt)
　Philip Morrisさんに感謝

・mob_db.txtの更新 (mob_db.txt)
　huge-cgiさん、編集者の方々に感謝

----------------------------------------
//0736 [2010/05/22] by popori

・スキル「ディボーション」献身元がディフェンダーを使用している際
　献身対象者のディフェンダーがレベル1で固定されているのを、献身元のディフェンダーのレベルと合わせるように変更 (status.c)
　tomoさんに感謝

・スキル「ソウルブレイカー」の物理ダメージが0の時、魔法ダメージが計算されないバグの修正をマージ (battle.c)
　ＡＥＧＩＳさん、Salvaさんに感謝

・スキル「鋭敏な嗅覚」で発生するサーバークラッシュの修正をマージ (skill.c)
　maruさんに感謝

・本家にて変更された、精錬費用改訂の部分の変更をマージ (npc_misc_refine.txt)
　tomoさんに感謝

・0x97のパケット構造更新に伴いPACKETVERを更新 (Makefile vc_make.bat bcc32_make.bat *.dsp clif.c vending.c)
　from OpenKoreProject

・スキル「イムポシティオマヌス」の最低攻撃力加算の式がおかしかったのを修正 (battle.c)

----------------------------------------
//0735 [2010/05/16] by Cocoa

・0732以降、砦以外のマップでシーズモードの時、通常モンスターに攻撃するとクラッシュする不具合を修正
	（battle.c）

----------------------------------------
//0734 [2010/05/13] by popori

・スクリプト命令「showevent」をNPCの名前を指定出来る様に拡張 (script.c script_ref.txt)

・PACKETVER21より、スクリプト命令「musiceffect」「areamusiceffect」を追加 (clif.* script.c script_ref.txt)
　※クライアントのBGMフォルダにあるmp3ファイルを演奏させます。
　　name(ファイル名)の指定には.mp3を省いたものを指定して下さい。
　　例) musiceffect "120"; // クライアントのBGMフォルダにある120.mp3を演奏させる

----------------------------------------
//0733 [2010/05/12] by popori

・2010-04-06日のクライアントまで対応 (clif.c vending.* *.dsp packet_db.txt vc_make.bat bcc32_make.bat Makefile client_packet.txt)
　PACKETVERを23まで引き上げましたので、使用する日付に合うPACKETVER、packet_db.txtに修正して下さい。
　※歩行関連の上位パケット実装は保留中です。
　　追々対応するので、もう少々お待ち下さい。

・0x804のパケットの仕様が現状不明なので、警告抑制のために関数のみ追加しておく (clif.c packet_db.txt)

・0721以降@コマンド「hotkeyset」が正常に動作しなかったのを修正 (atcommand.c clif.c)
　Cocoaさんに感謝

----------------------------------------
//0732 [2010/05/10] by Cocoa

・0731以降バイオプラントに攻撃できなかった不具合修正
	以下想定している動作です。
	・バイオプラント、スフィアーマインに関しては常に敵扱いで攻撃可能
	・エンペリウムとガーディアンはマップフラグ「gvg」があり、敵砦の場合のみ攻撃可能
		→　自分のギルド、同盟ギルドが所有する砦の場合攻撃不可能
		→　正規ギルド承認をとってない場合はギルドなしと同じ処理
		→　ギルドがなくてもガーディアンは攻撃可能、エンペはmiss処理
	※攻撃可能　：攻撃してダメージが出せる。
	　攻撃不可能：攻撃自体できない、スキル詠唱などは可能
	　miss　　　：攻撃できるがダメージはmiss

----------------------------------------
//0731 [2010/05/07] by Cocoa

・自砦のモンスター（エンペリウムなど）をダメージ0でも殴れてしまうのを修正（battle.c）

----------------------------------------
//0730 [2010/05/06] by Cocoa

・通常料理と課金料理の上昇ステータスが異なっていても、
　通常料理の効果が消去されていた不具合を修正（status.*, const.txt）

----------------------------------------
//0729 [2010/05/04] by Cocoa

・以下アイテムの効果「bAtk」を「bBaseAtk」に修正（item_db.txt）
	アトロスカード
	ダークナイトグローブ
	グロリアスタブレット

----------------------------------------
//0728 [2010/04/08] by Cocoa

・ガトリングフィーバーのATK補正を修正（status.c）

・ガトリングフィーバーの追加ダメージを削除（battle.c）

・達人の斧、盗賊の指輪の効果修正（item_db.txt）

----------------------------------------
//0727 [2010/04/08] by popori

・packet_db.txtの整理 (packet_db.txt)

・client_packet.txtの更新 (client_packet.txt)

・自砦及び同盟ギルドのガーディアン、守護石、バリケードにスキル攻撃が通ってしまうのを修正 (battle.c)
　ばるすさんに感謝

・SI_***の保管 (status.h)

・item_db.txtの更新 (item_db.txt)
　huge cgiさん、多くのDB編集者の方々に感謝

----------------------------------------
//0726 [2010/03/27] by Blaze

・0724の再修正
	-> 魔王モロククエストNPC最適化(npc_town_morocc.txt)
	-> フィアーブリーズ修正(battle.c, status.c)
	-> エピクレシス修正(skill.c)
	-> mob_skill_db修正(db/mob_skill_db.txt)

・スキル「ジュデックス」「ソウルエクスパンション」のスプラッシュ時ダメージ表示を変更(skill.c)

・スキル「フロントサイドスライド」「バックサイドスライド」のエフェクト表示を
　ノックバック後に表示させるように変更(skill.c)

・スキル「アースストレイン」を斜め方向に使用できないように変更(skill.c)

・「エピクレシス」「ラウダラムス」「ラウダアグヌス」の
　ステータス変化が機能しなかったのを修正(skill.c, status.c)

----------------------------------------
//0725 [2010/03/26] by popori

・mob_skill_db.txtの既存MOBに関する変更はBackoutし、新規MOBのみの定義を追加する (mob_skill_db.txt)

----------------------------------------
//0724 [2010/03/26] by popori

・0722の修正漏れを修正 (status.c)
　koyoriさんに感謝

・0721の修正 (char.c)
　dragontail789さんに感謝

・0712の温もりのHIT数変更をBackout (skill_unit_db.txt skill.c)
　※温もりのHIT数は秒間10HITに統一されます。
　Heavenさんに感謝

・0681のテコンランカーボーナスに関する修正 (pc.c)
　ARIAさん、unsyuさん、koyoriさんに感謝

・斧修練の効果が片手斧しか出ていないのを修正 (status.c)
　dragontail789さんに感謝

・スキル「エピクリシス」の効果を変更 (skill.c)
 ->設置時のみリザクレションの効果を発動するように変更
 ->バーサーク中、ギア搭乗中でも効果を発動するように変更
　unsyuさんに感謝

・魔王モロククエストの相違点の修正をマージ (npc_town_morocc.txt)
　mapleさん、tomoさんに感謝

・PACKETVER19よりスクリプト命令「showevent」をサポート (clif.* script.c script_ref.txt)

・client_packet.txtの更新 (client_packet.txt)

・0718以降BCCでコンパイル出来なかったのを修正 (pc.c)

・スキル「フィアーブリーズ」のHIT数は最大5回のようなので変更 (battle.c)

・vc_make.batの仕様を若干変更 (vc_make.bat)
 ->opt1からインクルードパスを分離させる。
 ->コンパイル時にVCVER、BITTYPE、CPU最適化スイッチ、コンパイルオプションを表示させるよう変更
 ->bcc32_make.batのようにコンパイル過程が表示されるように変更

・パーティー設定変更要求に関する修正 (clif.c)

・boitataさんのブラジリス関連の一部をマージ (item_db2.txt pet_db.txt)
　boitataさんに感謝

・DB類の更新 (item_db.txt mob_skill_db.txt mob_db.txt)
　huge cgiさん、多くのDB編集者の方々に感謝

----------------------------------------
//0723 [2010/03/15] by popori

・packet_db.txtの追加と微修正 (packet_db.txt)

・char.cの修正 (char.c)
　aris999さん、 dragontail789さんに感謝

・スキル「フィアーブリーズ」で0除算が発生する可能性を修正 (battle.c)
　うに〜くさんに感謝

・MAX_PACKET_DBを0x850に拡張 (clif.h)

----------------------------------------
//0722 [2010/03/12] by Blaze

・0719で追加された状態異常のタイマー判定がおかしかったのを修正(status.c)
	Thanks うに〜くさん

・スクリプト命令「setdragon」を拡張(script.c, pc.*, doc/script_ref.txt)
	->パラメータで色違いドラゴンに騎乗できるように(省略可)

----------------------------------------
//0721 [2010/03/09] by popori

・RagnarokRenewalのクライアントに対応 (*.dsp Makefile vc_make.bat bcc32_make.bat msg_auriga.conf packet_db.txt char.c int_party.c inter.c mmo.h clif.* intif.*)
　このパッチに伴い以下の点が変更されました。なお、現行最新のクライアントまでは対応していないので注意して下さい。
 ->packet_db.txtにRagnarokRE用の項目を追加。
 ->Makefile vc_make.bat bcc32_make.batにNEW_006b_REオプションを追加
 ->PACKETVERの引き上げ

　※従来のサクライクライアントを使用する場合は以下の点に注意して下さい。
　packet_db.txt：以下は RagnarokREより下の部分を全て削除し、使用するクライアントの日付に合わせてpacket_db.txtを編集して下さい。
　Makefile#line21：PACKETDEF = -DPACKETVER=20 -DNEW_006b -DNEW_006b_REの部分から-DNEW_006b_REを削除して下さい。
　bcc32_make.bat#line25：set __PACKETDEF__=-DPACKETVER=20 -DNEW_006b -DNEW_006b_REの部分から-DNEW_006b_REを削除して下さい。
　vc_make.bat#line34：set __PACKETDEF__=/D "PACKETVER=20" /D "NEW_006b" /D "NEW_006b_RE"の部分から/D "NEW_006b_RE"を削除して下さい。
　各Makefile：使用するクライアントの日付に合わせてPACKETVERを編集して下さい。

　※RagnarokRenewalのクライアントを使用する方
　コンパイルオプションNEW_006b_REを有効にし(デフォルトは有効)
　使用する日付に合わせてPACKETVER、packet_db.txtの編集を行って下さい。

・gcc環境下でのコンパイル警告を修正 (battle.c skill.c)

----------------------------------------
//0720 [2010/03/07] by Blaze

・ウルフライダー中、専用スキルが使えなかった不具合修正(skill.c)

・魔道ギア搭乗中、ヒールの効果を受けないように修正(skill.c)

----------------------------------------
//0719 [2010/03/06] by Blaze

・レンジャー、メカニックスキル実装 (skill.*, battle.c)

・新状態異常実装 (status.*, pc.*, unit.c, mob.c)

・ウォーロックスキル「リーディングスペルブック」実装 (map.h, skill.*, clif.*)

・下記DBファイル更新 (db/*)
	skill_db.txt
	skill_db2.txt
	skill_cast_db.txt
	skill_require_db.txt
	skill_require_db2.txt
	skill_unit_db.txt
	scdata_db.txt
	item_arrowtype.txt

・スクリプト命令にsetgear,checkgearを追加(script.c, doc/script_ref.txt)

----------------------------------------
//0718 [2010/02/25] by popori

・ギルド無所属のキャラクターがエンペリウムを攻撃出来るバグを修正 (script.c)
　bifuminさん、Salvaさん、辻にゅまさんに感謝

・エンペリウムに対して対象指定魔法を発動した場合Missとなるように、通常攻撃がMissとなる状況下でクリックしても攻撃出来ないのを修正 (clif.c battle.c)
　※ホム、傭兵に関しては本家の挙動が不明なので保留としておきます・・・。
　bifuminさんに感謝

・スクリプト関数getiteminfo()の返り値が一部おかしいのを修正 (script.c)
　testtesさんに感謝

・グラビテーションフィールドはハイドを貫通するように (battle.c)
　かんなぎさんに感謝

・左手武器装備にAtkが見かけ上加算されていないのを修正 (clif.c status.c)
　nyanoさんに感謝

・スキル「インビジブル」の効果が発動されない問題を修正 (status.c)
　olion22さんに感謝

・拳聖の祝福スキルはスキル取得者が止めを刺した場合に適用されるよう変更 (pc.c mob.c)
　unsyuさんに感謝

・マーダラーボーナスの経験値倍加はビットシフトに変更 (pc.c)

・バーンとバジン兄弟クエストの不具合修正をマージ (npc_town_yuno.txt)
　うに〜くさんに感謝

・ホムンクルススキル「S.B.R.44」の計算式修正をマージ (battle.c)
　tomoさんに感謝

・0713で追加したモバイルペットの兼ね合いでbattle_auriga.confのpet_status_supportのデフォルト値をyesに変更 (battle_auriga.conf battle.c)

----------------------------------------
//0717 [2010/02/23] by Cocoa

・アイテム使用時、無敵時間が削除されないように修正（clif.c）

----------------------------------------
//0716 [2010/01/02] by popori

・0715以降MOBの魔法攻撃を受けるとMAPサーバーがクラッシュする致命的なバグを修正 (skill.c)
　 Azuriteさん、shinogiさん、 dragontail789さんに感謝

----------------------------------------
//0715 [2009/12/30] by popori

・本家では他の罠にトーキーを重ねることが出来るようなので、0713の修正を一部巻き戻しskill_unit_db.txtで変更することにする (skill.c skill_unit_db.txt)

・かんなぎさんの指摘によりハイド状態でアースクエイクは被弾しないようにする (battle.c)
　かんなぎさん、Lyeseさんに感謝

・AthenaProject Rev.384をマージ (skill_db.txt battle.c skill.c)
 ->ハンタースキル「フリージングトラップ」をMISC→物理攻撃へ変更
 ->ATK、FLEE依存(参考：弓手テンプレ)
　nanashiさんに感謝

・AthenaProject Rev.327をマージ (status.c)
 ->スキル「テンションリラックス」の仕様が転生スキル仕様変更前のままだったのを修正　（10秒毎に12SP消費 → 発動時のみSP消費）
　sakiさんに感謝

・docのrefの一部が更新されていないので、少し更新 (db_ref.txt)

・AthenaProject Rev.258をマージ (const.txt item_bonus.txt map.h pc. status.c skill.c)
 ->アイテムボーナス「bAddEffMagic」を追加
　ico776さんに感謝

・hymiwaさんの情報を元に一部のmapflagをAuroraを参考に変更 (mapflag_pvp.txt)
　Thanks to Aurora Dev Team!

----------------------------------------
//0714 [2009/12/28] by popori

・OpenKore、eAよりパケット情報を保管 (client_packet.txt)

・サンドマンは巻き込み倍加(巻き込み数分睡眠判定)するよう変更 (skill.c)

・weapon_reflect_drainをデフォルトで有効にするよう変更 (battle_auriga.conf battle.c)

・詠唱中はNPCをクリックしても反応しないように修正 (clif.c)

・0712、0713の整理 (skill.c)

・AthenaProject Rev.257をマージ (item_bonus.txt const.txt map.h pc.c status.c skill.c)
 ->アイテムボーナス「bAddCastRate」を追加
　ico776さんに感謝

・AthenaProject Rev.565を参考に以下を変更 (skill.c)
 ->スキル及びアイテムによるキャスティング/ディレイ削減効果を乗算から加算に変更(参考：ROratorio計算機)
　nanashiさんに感謝

・0713のReadmeの名前を間違えてしまったので変更

----------------------------------------
//0713 [2009/12/21] by popori

・battle_auriga.confのfirepillar_splash_onが無効時に巻き込み効果が無くなっていたのを修正 (skill.c)

・BOSSからの攻撃の場合ハイド中に関係なく全ての攻撃が当たるよう修正 (battle.c)

・EAS_USEMAXの判定が一部おかしいので修正 (skill.c)

・battle_auriga.confのweapon_attack_autospell無効時でも融合状態であれば、温もりにオートスペルが発動するように修正 (battle.c)

・属性場の効果が、攻撃対象が属性場にいる場合各ダメージ増加になっていたのを自身が属性場にいる場合各ダメージ増加に修正 (battle.c)
　dragontail789さんに感謝

・トーキーボックスに関する修正 (skill.c)
 ->トーキーボックスはbattle_auriga.confのplayer_skill_nofootsetに関係なく重ね置き出来るように修正
 ->HPを7万に変更
　Azuriteさんに感謝

・スキル「マグナムブレイク」「サイトラッシャー」で罠がノックバックするよう修正 (battle.c skill.c)

・eAを参考に新規ペットを追加(jROモバイルペット？含む)、同時にペット「餅」の餌を緑ハーブに変更 (pet_db.txt)
　※eAのpet_db.txtからほぼそのまま持ってきただけですので、細かい数値に目を通していません。
　　詳細な数値が分かる方いらっしゃいましたら、情報お願いします。
　Thanks to eA Dev Team!

・AthenaProjectを参考にスキル「イムポシティオマヌス」の効果を修正 (battle.c)

・AthenaProject Rev.361をマージ (skill.c)
 ->MOBの使うストリップ系スキルは、PCが該当箇所の装備をしていなくても発動し、脱衣状態になるように修正(アサWiki、殴り魔法職Wiki避難所)
　nanashiさんに感謝

・アサシン系の回避率増加による移動速度の増加は速度増加と重複しないよう修正 (status.c)
　dragontail789さんに感謝

・物理スキルでの攻撃時、HP/SP一定吸収、HP/SP%吸収両方乗るように変更 (battle.c)
　unsyuさんに感謝

・AthenaProject Rev.513のファイアーピラーに関する部分を一部マージ (battle.c skill.c)
 ->ダメージ1固定のMOBには不発するように修正
 ->設置制限5個、MB・AS・SiRでノックバック、HP3500に設定(ソース無し/暫定)

----------------------------------------
//0712 [2009/12/17] by popori

・0711の微修正 (battle.c unit.c)

・温もりのHIT数の修正 (skill_unit_db.txt skill.c)
 ->本家だとHIT間隔は秒間50のようなので変更
 ->BOSS属性には通常のHIT間隔の5倍にする(デフォルトは秒間10HIT)

・0708以降スキル「プロボック」がBOSS等にも効いてしまうので、戻し (skill.c)
　ばるすさんに感謝

・パケットの一部未判明部分をeAから保管 (client_packet.txt clif.c)
　Thanks to eA Dev Team!

・PETのASPDに関する修正 (status.c)
　kuroneko-Kさん、Toshiさん、easeさんに感謝

・ハイネスヒールが不死属性相手にも適用されてしまうのを修正 (skill.c)
　unsyuさんに感謝

----------------------------------------
//0711 [2009/12/15] by Lyese

・ガンバンテインが演奏スキルに効果を及ぼすように変更(skill.c)

・ギルドスキル詠唱時にフリーキャストで歩行できる問題を修正(unit.c)

・カートターミネーションに錐の効果が発動するように変更(battle_auriga.conf)

・シールドチェインの射程を5に修正(skill_db.txt)

----------------------------------------
//0710 [2009/11/23] by Blaze

・アイテムボーナスに以下を追加(map.h, pc.*, skill.*, db/const.txt, doc/item_bonus.txt, )
	bonus3 bAddEffSkill
	-> 指定したスキル使用時に状態異常付与効果を追加します

	bonus4 bSkillAutoSpell
	bonus4 bSkillAutoSpell2
	bonus4 bSkillAutoSelfSpell
	bonus4 bSkillAutoSelfSpell2
	-> 指定したスキル使用時、追加でオートスペルが発動します

	bonus4 bAutoActiveSkill
	-> 指定したスキル使用時、アイテムが活性化します

	※詳しくはdoc/item_bonus.txtを参照

・item_db.txtを更新(thx huge-cgiさん)
	-> EP13.1で追加された装備品の効果を実装
	-> アクティブアイテムの確率・効果を本鯖仕様に修正

----------------------------------------
//0709 [2009/11/23] by popori

・アイテムボーナスの一部の仕様を変更 (battle.c)
　Toshiさんに感謝
「bWeaponComaEle」「bWeaponComaEle2」「bWeaponComaRace」「bWeaponComaRace2」においての
　種族指定で0〜9の種族を指定した際BOSSも適用される仕様でしたが
　この仕様を変更し0〜9の種族を指定した場合はBOSSを適用外にする仕様にします。

・0706にて追加したキャッシュアイテム関連の微修正 (skill_cast_db.txt)

・気奪に関する修正 (skill.c)
 ->PKMAPでも発動するように変更
 ->MOB相手には詠唱妨害効果を付けるように変更
 ->BOSS属性には無効に変更

----------------------------------------
//0708 [2009/11/23] by Rayce

・0706のskill.cの修正を整理（skill.c）

・アサシン転職クエストの「転職試験用見本」を倒すMAPの穴に落ちると
  nullpoエラーが発生するのを修正（script/npc/job/npc_job_12assassin.txt）

----------------------------------------
//0707 [2009/11/17] by Salva

・アイテムボーナス｢bAddSkillDamageRate｣は他のダメージ増幅の効果がないスキルでも
　ダメージが増加するように修正 (battle.c)
	Ｓｃｈｗａｒｚｗａｌｄさん、easeさんに感謝

・反射ダメージはスキル｢リフレクトシールド｣などと｢オークロードカード｣などの
　反射効果のあるアイテムは別々にダメージ、オートスペルの判定をするように修正 (battle.c)

・反射ダメージの最低保障ダメージ1を無くすように修正 (battle.c)
　※デスバウンド反射については詳しい仕様が不明のため、
　リフレクトシールドと同じ変数を使用するようにだけ修正しています

・反射攻撃をしたときの攻撃によるアイテム オートスペル発動確率は半分に修正 (battle.c)

・スキル｢プロボック｣の詠唱妨害効果はプレイヤー使用時のみに修正(skill.c)

----------------------------------------
//0706 [2009/11/14] by popori

・遠距離攻撃耐性で魔法ダメージも減らすよう修正 (battle.c)
　Lyeseさんに感謝

・eA、その他の情報を参考に以下のスキルを実装 (skill.* skill_cast_db.txt skill_db2.txt skill_db.txt)
 ->キャッシュアイテム専用スキル「パーティーブレッシング」「パーティー速度増加」「パーティーアスムプティオ」
 ->アイテム用スキル？「セルフプロボック」
 ->定義のみ追加「GM_SANDMAN」「ALL_CATCRY」「ALL_PARTYFLEE」「ALL_ANGEL_PROTECT」「ALL_DREAM_SUMMERNIGHT」

　※SM_SELFPROVOKEはアロエベラに使用する模様
　　ALL_CATCRY ALL_PARTYFLEE ALL_ANGEL_PROTECT ALL_DREAM_SUMMERNIGHTはイベント専用スキルのようです。

・温もりのskill_typeをweaponに変更しておく (skill_db.txt)

・AthenaProject Rev.556をマージ (skill.c)
　nanashiさんに感謝
　->スキル「ブラギの詩」の効果を修正(参考：雷鳥テンプレ)

・アクティブアイテムに関連するバグ修正を取り込み (pc.c script.c map.h)
　dragontail789さんに感謝

----------------------------------------
//0705 [2009/11/09] by Rayce

・可変引数を使用する際、va_list型変数に対して複数回 va_arg() 実行する場合は
  処理系によっては挙動が不定になる致命的な不具合を修正
  （db.c, malloc.c, utils.h, clif.c, map.c, party.c）
	→ 可変引数「...」が直接関数の引数にある場合、va_start(), va_end() で開き直す
	→ va_list型変数を引数として持つ関数の場合、va_copy() でコピーして使用する
	→ va_copy() が定義されていない処理系（BCC, VC等）については、memcpyで代用する

----------------------------------------
//0704 [2009/11/08] by Rayce

・TXT: メールおよびペットのセーブデータのキャッシュが正しく生成出来ていなかった
       潜在的なバグを修正（int_mail.c, int_pet.c）

・TXT: ジャーナルに関する修正（journal.c）
	→ ファイルのチェックにおいて、バージョンの不一致かサイズの不一致かがわかるように判定を分離
	→ バージョンとサイズのチェックに失敗した場合、abort() せずに処理を続行する
	→ journal_header構造体の crc32 メンバーをunsigned long型に変更
	→ JOURNAL_IDENTIFIER を 11 から 12 にアップ

・不必要な nullpo_retr() を除去（mob.c, skill.c）

----------------------------------------
//0703 [2009/11/08] by Rayce

・0697において、auriga-start から砦情報の初期化部分を削除し忘れていたので修正
・0700の属性の優先順位の処理を最適化（battle.c）
・0702において、status_change_start(), status_change_end() の引数 bl には BL_SKILL が
  含まれる場合が考慮されていないため、unit_bl2ud() の戻り値でnullpo警告が発生する可能性を修正（status.c）
・0702の clif_move() に関する処理を最適化（clif.c）

----------------------------------------
//0702 [2009/11/08] by popori

・0701の処理を改善してみる (clif.c status.c map.h)

・クァグマイアをBOSSも有効にする (scdata_db.txt)
　shobonさんに感謝

----------------------------------------
//0701 [2009/11/08] by popori

・0119以降画面内のユニットの移動速度が変化した時に、見かけ上移動速度が更新されない問題を暫定修正 (clif.c)
　※本来なら、ユニットの移動速度が変化した場合のみ追加処理をさせたいのですが
　　移動速度に関する処理が散らばっているので、暫定形式で修正しました
　yumさん、Toshiさんに感謝

・クァグマイアの移動速度低下を1/3から2/3へ修正 (status.c homun.c merc.c)
　yumさんに感謝

----------------------------------------
//0700 [2009/11/07] by popori

・0699の攻撃時の属性の優先順位の修正にてif文が抜けてしまっていたのを修正 (battle.c)

・空蝉、影分身状態をディスペル、運命のタロットカードの女教皇で解除されるよう修正 (scdata_db.txt)

・scdata_db.txtのReleasable項目に速度減少を指定出来るよう拡張。またそれに伴い不要なコードを削除する (skill.c status.c db_ref.txt)

・カートブーストが速度減少で解除されるよう修正 (scdata_db.txt)

----------------------------------------
//0699 [2009/11/06] by popori

・ハイド状態でアースクエイクを回避出来ないよう修正 (battle.c)

・0698の修正でギルドスキル「治療」を考慮していなかった点を修正 (skill.c)

・battle_auriga.confのplayer_auto_counter_typeのデフォルトを0に (battle_auriga.conf battle.c)

・攻撃時の属性の優先順位を誤っていたのを修正 (battle.c)
　shobonさんに感謝

・グランドクロスの不要な処理を削除 (battle.c)
　shobonさんに感謝

----------------------------------------
//0698 [2009/11/05] by popori

・Arocさんの指摘により、0689のpc_healの仕様変更に伴い、結婚スキル「あなたに尽くします」で
　バーサーク中の相手にSPを与えられてしまうのを修正 (skill.c)

　※0689のpc_heal()の変更にてバーサーク中でもSP回復をするよう仕様を変更致しました。
　　それに伴いスクリプト命令healでバーサーク中のキャラにもSP回復するように変更しました。
　　また、本家ではバーサーク中のレベルアップ時や宿屋でもHPが回復するようなので、後々pc_heal()の
　　HP回復制限も撤廃する予定ですが、現状は未着手です。

----------------------------------------
//0697 [2009/11/03] by Rayce

・SQLモードの場合、SEで追加された砦の情報が guild_castle テーブルに
  保存できなかった問題を修正（int_guild.c）
		reported by ponyoさん

	→ サーバ起動時の初期化時に、商業値と防衛値をデフォルトの「1」に設定する
	→ あらかじめセーブデータに砦の情報を用意する必要がなくなったので、
	   win32_start.bat および main.sql から砦情報の初期化部分を削除
	→ SQLの場合、砦情報の保存を行うときは「ON DUPLICATE KEY UPDATE」を
	   利用する（OracleのMergeクエリに相当）

・SQL: guild_castleテーブルのeconomy, defenseのデフォルト値を '1' に変更
・SQL: datetime型のフィールドのデフォルト値を '2000-01-01 00:00:00' に変更

----------------------------------------
//0696 [2009/10/27] by Rayce

・0679以降、status_calc_pc() で指定する配列のサイズが MAX_PCSKILL ではなく
  MAX_SKILL のままであったため、バッファオーバーフローが発生する致命的な問題を修正（status.c）

・性転換時の雷鳥スキルリセットにおいて、2次職/3次職のスキルがリセットされない問題を修正（char.c）

・0695の行動不能状態異常の優先順位において、SC_SLEEPは実質何もしないので
  判定処理から除外するように改善（status.c）

・GetSkillStatusChangeTable() のバッファオーバーフロー/アンダーフロー対策（skill.c）

----------------------------------------
//0695 [2009/10/22] by Cocoa

・0694の修正抜けを適用
	-> 行動不能状態異常の優先順位を実装（status.c）

----------------------------------------
//0694 [2009/10/22] by Cocoa

・item_db.txtの更新
	リリースオブウィッシュの効果実装
	大空の帽子実装
	グランペコのヘアバンド実装
	ニューカウボーイハット実装

・歴史学者(ゲオルグの呪い/建国神話)クエストの進行が止まる不具合修正（npc_town_prontera.txt）

・JobLvに関係なくアコライトに転職できた不具合を修正（npc_job_04acolyte.txt）
	JobLvなどの判定箇所未調査の為、仮修正

・プロボックのDef減少値を修正（status.c）

・アサシンテンプレより行動不能状態異常の優先順位を実装（status.c）

----------------------------------------
//0693 [2009/10/18] by Rayce

・0687以降、motd.txtを未記入にするとバッファオーバーフローが発生する致命的な問題を修正（pc.c）
	reported by magnusさん

・0691の gm_can_drop_lv の処理を最適化（clif.c, storage.c）

----------------------------------------
//0692 [2009/10/18] by Rayce

・0689の修正
	→ Mob専用スキルを不発にしない判定をskill.cにハードコーディングするのではなく
	   db/skill_db2.txt のmisfireの設定値でのみ判定するように変更（skill_db2.txt, skill.c）

	→ 右手のOTダメージが左手のダメージに加算されている間違いを修正（battle.c）

	→ アクティブタイマーの永続問題の修正を巻き戻し（pc.c）
	   変数 current_equip_name_id を参照しても良いのはitembonus内で呼び出される場合のみです！
	   pc_unequipitem() は他の場所からも呼び出されるものなので、current_equip_name_id に
	   格納されている変数の一貫性は保証できません。

・skill_upperskill(), skill_mobskill() をstaticに変更（skill.*）
・使われていない関数 skill_abraskill(), skill_cloneable() を削除（skill.*）

----------------------------------------
//0691 [2009/10/17] by popori

・0689のgm_can_drop_lvの修正を再度修正 (clif.c storage.c)
　ponyoさんに感謝

----------------------------------------
//0690 [2009/10/16] by popori

・0689のイグニッションブレイクの修正が抜けていたので追加 (skill.c)

----------------------------------------
//0689 [2009/10/16] by popori

・アクティブタイマーが永続してしまうバグを修正 (pc.c)
　うに〜くさんに感謝

・ヒールのディレイが消えているのを修正 (skill_cast_db.txt)
　Cocoaさんに感謝

・オーバートラストの攻撃力増加を使用者25%、パーティーメンバーを5%に修正 (battle.c status.c)
　dragontail789さんに感謝

・gm_can_drop_lvの取引禁止、倉庫出し入れが制限出来ていなかったので追加 (clif.c storage.c)
　ponyoさん、cornusさんに感謝

・バーサーク中、月光剣等でSP回復するよう修正 (pc.c)
　hancho3さん、dreamさんに感謝

・0686のdbを修正 (skill_cast_db.txt)
　LunarPhantomさんに感謝

・AthenaProject Rev.435をマージ (skill_db.txt skill_db2.txt skill_cast_db.txt abra_db.txt battle.c skill.c status.c)
 ->NPCスキル「ガイデッドアタック」を本鯖仕様に修正(参考：アサテンプレ)
 ->→一定時間DEX150%(効果時間が不明なので1Lvにつき5秒としました)
 ->同時にソース内名称も「ガイデッドアタック」で統一
　nanashiさんに感謝

・AthenaProject Rev.432をマージ (skill_cast_db.txt skill_tree.txt battle.c skill.c)
 ->スキル「ウォールオブフォグ」を本鯖仕様に修正(参考：sage wiki)
 ->同時に、ソース内名称を「ウォールオブフォグ」に統一
　nanashiさんに感謝

・サクラメントのキャスティング減少率を修正 (skill.c)
　dragontail789さんに感謝

・イグニッションブレイクの条件式がおかしかったので警告が出ていたのを修正 (skill.c)

----------------------------------------
//0688 [2009/10/15] by Rayce

・x64のWindows環境下において、コンパイル時に「'SOCKET' から 'int' への変換です」の
  警告が発生するのを修正（socket.c）
	reported by Toshiさん

・0687以降、x64でコンパイル時に「'size_t' から 'int' に変換しました。」の
  警告が発生するのを修正（script.c）
	reported by Toshiさん

----------------------------------------
//0687 [2009/10/15] by Rayce

・conf/motd.conf が32行までしか読み込めなかった制限を撤廃（pc.c）
		reported by dragontail789さん
	→ MOTD_LINE_SIZE を使用せず、記述された全ての内容を保存するようにメモリアロケートする
	→ MOTDの送信処理を pc_send_motd() として分離

・add_str() における変数について、x64を意識してsize_t型に変更（script.c）

----------------------------------------
//0686 [2009/10/13] by popori

・マーダラーボーナスに取得経験値2倍が無かったので追加 (pc.c)

・サンクチュアリは盗作不可に変更 (skill_db2.txt)

・エンチャントデッドリーポイズンの効果をリログで切れるように修正 (scdata_db.txt)

・ストームガストが1HITしかしなくなっていたのを修正 (skill_cast_db.txt)
　LunarPhantomさん、dragontail789さんに感謝

・フロストノヴァも同時に修正 (skill_cast_db.txt)
　LunarPhantomさんに感謝

・マジスレテンプレより、スタン中は凍結しないように修正 (status.c)

・キルハイルクエストが止まるのを修正 (npc_quest_kiel.txt)
　Cocoaさんに感謝

----------------------------------------
//0685 [2009/10/12] by Rayce

・foreach系の関数は、実行したサブルーチンの戻り値を加算してint型として返すように拡張
  （db.*, clif.*, map.*, party.*）
	based on eA, thanks a lot!!

・foreach系の関数で数をカウントする部分については、戻り値だけで取得するように改善

----------------------------------------
//0684 [2009/10/09] by Rayce

・skill_castend_id() および skill_castend_pos() において、PACKETVERが15以下の場合でも
  clif_skill_cooldown() を呼び出すように簡略化（skill.c）

・3次職スキルのクールタイム判定箇所をstatic timerの部分に移動（clif.c）
・status_change_start() で、常に icon_tick を初期化するように簡素化（status.c）
・status_get_max_sp() のデフォルト値を 1 → 0 に変更（status.c）

・全体的な細かい整形（battle.c, clif.c, pc.c, skill.c, status.c）

----------------------------------------
//0683 [2009/10/09] by Rayce

・0677のグランドクロスおよびグランドダークネスのDEF無視強制解除処理タイミングを変更（battle.c）
・0677のニューマ貫通処理のリファクタリング（battle.c）

・WL_EARTHSTRAIN の発動率計算式を、漸化式から一般式に改善（skill.c）
・WL_EARTHSTRAIN の初期位置指定は dirx[], diry[] を利用して簡素化（skill.c）
・RK_IGNITIONBREAK および WL_COMET において、unit_distance() が複数回呼ばれる無駄を改善（skill.c）

・配列のサイズが中途半端になるので、MOB_ID_MAX を 2500 → 2501 に変更（mob.h）

----------------------------------------
//0682 [2009/10/09] by Rayce

・MOBが影跳びを使用するとき、サーバクラッシュする可能性を修正（skill.c）
・GC_PHANTOMMENACE の範囲攻撃処理で、状態異常情報がNULLの場合にサーバクラッシュする可能性を修正（skill.c）

・WL_EARTHSTRAIN において、PCのインベントリの検索処理でバッファオーバーフローが
  発生していた問題を修正（skill.c）

・clif_mshield() で確保するバッファサイズが小さいため、バッファオーバーフローが
  発生していた問題を修正（clif.c）

・AB_CLEMENTIA, AB_CANTO, AB_CHEAL のcase文の誤りを修正（skill.c）
・pc_readdb() において、MAX_PCSKILL の不等号が間違っているので修正（pc.c）

・RK_DRAGONBREATH の計算式を暫定変更（battle.c）
	現行の計算式では、HPとSPが攻撃ダメージに及ぼす値が常に0であるため
	また、最大SPが0のとき（スキル使用者がMOBの場合等）に0除算のエラーが発生するため

----------------------------------------
//0681 [2009/10/08] by popori

・テコンランカーボーナスにテコン全スキルLvMAXで使用可能が抜けていたので追加 (pc.c)
　dragontail789さんに感謝

・ディバインプロテクションの計算式を修正 (battke.c)
　dragontail789さんに感謝

・カイゼルで復活した時にオシリスカードの効果が発動するよう修正 (pc.c)

----------------------------------------
//0680 [2009/10/07] by popori

・db系統の更新が全て巻き戻っているので、再度変更
(skill_db.txt skill_db2.txt skill_unit_db.txt skill_cast_db.txt )
　dragontail789さん、cornusさんに感謝

・ヘルジャッジメントの範囲をLv10の時のみ27×27にする (skill_unit_db.txt)
　Blazeさんに感謝

・ドキュメントの追記 (client_packet.txt)

・0679のコンパイル警告を修正 (skill.c)

・0679以降@allskill、/allskillが正常に動作しなくなっていたのを修正 (pc.c)
　NP3228さん、dragontail789さんに感謝

・影斬りの移動効果をGvGMAPでは発動しないよう修正 (skill.c)

----------------------------------------
//0679 [2009/10/06] by Blaze

・3-1次職スキル暫定実装（一部未実装）
	 (skill.*, battle.c, status.*, unit.c, pc.*, db/produce_db.txt,
	  db/skill_db.txt, db/skill_db2.txt, db/skill_cast_db.txt,
	  db/skill_require_db.txt, db/skill_unit_db.txt, db/scdata_db.txt）

・3次職関連アイテムを一部実装
	（db/item_db.txt, db/const.txt）

・スキルIDが肥大化してきたため、ID区分を3つに分割
	（mmo.h, char.c, char-converter.c, skill.*, pc.*）

・SkillStatusChangeTableを参照するとき、GetSkillStatusChangeTable()で参照させるように統一
	-> SkillStatusChangeTableのextern宣言を撤廃
	-> skill.c外部からステータス異常を参照するとき、Tableを使用しないように修正
	（skill.*, pc.c, battle.c, status.c）

・clif_status_change()を拡張
	-> 拡張定義のvalを指定できるように
	-> デバッグコマンド「@icon」に第4パラメータを指定できるように
	（clif.*, atcommand.c, conf/help.txt）

・status_change_start()からアイコン表示時、一部状態異常で
　tickが書き換えられてタイマーが表示されてしまうのを修正
	（status.c）

・スキルの固有ディレイ（クールタイム）を暫定実装（3次職スキルのみ対応）
	-> skill_cast_db.txtにクールタイムの設定項目を追加
	（skill.c, clif.c, db/skill_cast_db.txt, db/db_ref.txt）

・スクリプトにsetdragon命令とcheckdragon()を追加
	（script.c, db/script_ref.txt）

----------------------------------------
//0678 [2009/10/05] by popori

・0677のソウルチェンジの判定文がおかしかったのを修正 (skill.c)

----------------------------------------
//0677 [2009/10/05] by popori

・スパイラルピアースを強制遠距離に (skill_db2.txt)
　Y.Minadukiさんに感謝

・イービルランドの範囲を固定で11×11に変更 (skill_unit_db.txt)
　Toshiさんに感謝

・ベノムスプラッシャーの爆発までのインターバルを変更 (skill_cast_db.txt)
　Toshiさんに感謝

・バーサーク中の相手にソウルチェンジ出来ないように修正 (skill.c)

・スパイダーウェブに関する修正 (skill_db.txt skill_unit_db.txt skill_cast_db.txt)
 ->効果時間変更
 ->範囲を1×1に変更
 ->対象指定に変更

・AthenaProject Rev.350をマージ (battle.c)
 ->MOBの「アローシャワー」「シャープシューティング」はニューマを貫通するように修正
 ->また、遠距離攻撃耐性のアイテム効果を無視するように修正
　nanashiさんに感謝

・倉庫の最大預かり数をデフォルトで600に変更 (mmo.h)

・グランドクロス、グランドダークネスの攻撃力修正、DEF無視を強制解除するよう修正 (battle.c)
　shobonさんに感謝

・魔王モロクがタイムアウトでKillされないのを修正 (npc_town_morocc.txt)
　Toshiさん、Cocoaさんに感謝

・MOB_ID_MAXを2500に拡張しておく (mob.h)

・ヘルジャッジメントの効果がアイスウォールに及ばないよう修正 (skill.c)

・ヴァンパイアリタッチはBL_CHARを用いるように修正 (skill.c)

・アンクルで拘束中のMOBはテレポート出来ないように修正 (skill.c)

----------------------------------------
//0676 [2009/09/28] by popori

・一部のクライアントがサポート出来ていなかったのでPACKETVERを分ける (clif.* skill.c Makefile bcc32_make.bat vc_make.bat *.dsp)
 ->新スキルウインドウ対応をPACKETVER15に
 ->skillstatictimerのディレイ表示サポートをPACKETVER16に
　 ※ただし今のところこのパケットを使用するのは3次スキルのみ？らしいので、パケットの実装のみ。
 ->0x1a2の拡張をPACKETVER17に
 ->バフ時間表示、ディレイタイム表示をPACKETVER18に

・packet_db.txtの追記、修正 (packet_db.txt)

・ドキュメントの追記 (client_packet.txt)

・一部のbattle_auriga.confの初期値を本鯖仕様に変更 (battle_auriga.conf battle.c)

・Cocoaさんのランドマインの待機時間の修正を再度取り込み (skill_cast_db.txt)
　Cocoaさんに感謝

・影跳びはGvG中使用不可、失敗してもSPを消費するよう修正 (skill.c)

----------------------------------------
//0675 [2009/09/24] by Rayce

・即時発動スキル（skill_db.txtのinfが4）については、対象を自分自身に強制するように修正（clif.c）
	reported by Lyeseさん

	-> 即時発動スキルを他者に使用できてしまう問題が解決されます
	-> 阿修羅とティオアプチャギは状況に応じてinfが「即時発動」から「敵」に変更される場合があるため
	   別途判定を設けてます

・anti hackerコードの追加
	merged from eA, thanks a lot!!

	-> ホムや傭兵が居ない状態でもホムスキルや傭兵スキルを使えてしまうのを防ぐ
	-> ID指定スキルは、infが0（パッシブスキル）と2（地面スキル）の場合は使用できないようにする
	-> 地面指定スキルは、infが2（地面スキル）以外の場合は使用できないようにする

----------------------------------------
//0674 [2009/09/23] by Rayce

・gcc4でコンパイル時の警告を修正
	-> dereferencing type-punned pointer will break strict-aliasing rules（socket.c, httpd.c）
	-> implicit declaration of function（login.c）

・UNIX/Linuxにおいて、gccのバージョン表記が英語以外の場合を考慮して
  バージョン番号を検出する部分を修正（Makefile）

----------------------------------------
//0673 [2009/09/23] by Rayce

・キャスティングペナルティ「casting_penalty_type」を有効化している場合、ログイン時に装備が
  外れてしまう問題を修正（pc.c）
	reported by dragontail789さん

・上記のようにunit_dataの初期化が行われていないと様々な問題を引き起こす可能性があるため
  unit_dataset() の呼び出し優先度を上げるように修正（homun.c, merc.c, mob.c, pet.c）

・battle_auriga.conf の「hide_GM_session」の説明を修正（conf/battle_auriga.conf）
	reported by ponyoさん

・script_ref.txt のgetareadropitem関数の説明が間違っていたのを修正（doc/script_ref.txt）
	reported by crisp.さん

----------------------------------------
//0672 [2009/09/23] by Rayce

・msg_auriga.conf のimportが作動しなかった問題を修正（atcommand.c）
	reported by dragontail789さん、thanks to Blazeさん

・@giveitemコマンドで、「%sを%d個貰いました。」のメッセージはコマンド使用者ではなく
  アイテムを配布されたユーザに表示されるように修正（atcommand.c）
	thanks to dragontail789さん

・atcommand_auriga.conf のsynonymコマンドにGMレベルを個別設定できるように拡張（atcommand.c）

	例）reloaditemdb: 99
	    ri1= reloaditemdb
	    ri2= reloaditemdb: 50

	@reloaditemdb のGMレベルは99に設定される
	@ri1 は従来通りのsynonym書式なので、@reloaditemdb のGMレベルを引き継いで99に設定される
	@ri2 は個別設定書式なので、GMレベルは50に設定される（@reloaditemdb は99のまま）

----------------------------------------
//0671 [2009/09/23] by Rayce

・全体的な細かい整形（battle.c, merc.c, mob.c, pc.c, skill.c, status.*）

----------------------------------------
//0670 [2009/09/23] by Rayce

・0634以降、スキル使用失敗時に失敗メッセージが表示されなくなったスキルを修正（skill.c）
	-> フロストダイバー
	-> パンボイス
	-> 魅惑のウィンク

・0634以降、クラッカーの使用失敗時にnullpoエラーが発生するのを修正（skill.c）

・攻撃時の距離判定処理を最適化（battle.c）
  calc_flag の dist メンバは不要になったので削除
・battle_skill_attack() における追加効果判定文を最適化（battle.c）

----------------------------------------
//0669 [2009/09/23] by Rayce

・bDefRatioATK系とbIgnoreDefの戦闘ダメージ計算方法を最適化（battle.c）
	-> bIgnoreDef系の判定をstep15からstep14に移動して先に計算する
	-> bIgnoreDef系のrateが100ならbIgnoreDef系が無いものとみなし、bDefRatioATK系の計算を行う

----------------------------------------
//0668 [2009/09/23] by Rayce

・status_get_max_hp() MOBのギルド情報取得において、 guild_mapname2gc() の代わりに
  guild_mapid2gc() を使うように最適化（status.c）
・歩行停止処理 unit_stop_walking() を整理（unit.c）
・凍結の滑りに関する処理から SC_BLADESTOP の判定を分離する（mob.c）

・hex_dump() で、半角スペース（0x20）は「.」に置換せずに表示するように修正（utils.c）

----------------------------------------
//0667 [2009/09/23] by Rayce

・フリップザコインのコインタイマーに関する修正（pc.c, unit.c）
	-> ログイン時、コインタイマーが初期化されてなかったのを修正
	-> ログアウト時、コインタイマーが削除されてなかったのを修正

・ログイン時、AutoActiveタイマーを初期化するように修正（pc.c）
・bAutoActiveItem系において、効果時間が32768msまでしか指定できないので、
  activeitem構造体の tick メンバをshort型からint型に変更（map.h, pc.*）

----------------------------------------
//0666 [2009/09/23] by Rayce

・pc_activeitem() の引数の flag をunsigned long型に変更（pc.h）
・活性化発動タイミングを補正するため、pc_activeitem_start() の引数に tick を追加（battle.c, pc.*）
・map_session_data構造体の activeitem_timertick メンバは不要なので撤去（map.h, pc.c, script.c）

・アクティブアイテム関連処理のリファクタリング（pc.c, script.c）

----------------------------------------
//0665 [2009/09/23] by Rayce

・スキルディレイに関する処理は全て skill_delayfix() に集約する（battle.c, skill.*, unit.c）
	-> 引数を変更し、スキルIDとスキルLvのみを渡す
	-> unit.cでの個別処理をしないようにする

・スキルディレイがamotionより小さい場合、amotionを最低値として保証する（skill.c）
	merged from eA, thanks a lot!!

----------------------------------------
//0664 [2009/09/23] by Rayce

・武器研究の命中率計算が桁落ちしていた問題を修正（battle.c）
・武器研究の命中率計算のタイミングをstep3からstep2に移動（battle.c）

・ゴスペルの敵に対する呪い/暗黒/毒効果において、確率計算にはスキルユニットではなく
  ユニット所有者のベースレベルを渡すように修正（skill.c）

・skill_castend_pos() における SI_ACTIONDELAY の発生タイミングを
  skill_castend_pos2() の呼び出し前に移動（skill.c）

----------------------------------------
//0663 [2009/09/23] by Rayce

・0630以降、ジークフリードの装備耐性の効果が無かったのを修正（status.c）
・あまり意味がないので、battle_auriga.conf の「scdef_no_difflevel」は撤廃（battle.*, status.c）
・月の安楽状態に関する判定が間違っているような気がするので修正（status.c）

----------------------------------------
//0662 [2009/09/23] by Rayce

・スキル個別の仕様切り替え機能は蛇足なので、battle_auriga.conf の「whistle_perfect_flee」は撤廃
  口笛は完全回避上昇効果が無い仕様で固定化
  （battle.*, skill.c, status.c）

・PC以外の場合においても口笛に完全回避上昇を乗せないように修正する（status.c）
・SC_WHISTLE_ 状態における回避上昇計算が SC_WHISTLE を元に行われていた問題を修正（status.c）

----------------------------------------
//0661 [2009/09/23] by Rayce

・clif_status_change() を整理（clif.c）
・@icon に第3引数を追加（atcommand.c）
	アイコンのディレイ時間を指定、省略時は0と同じ

・conf/help.txt更新
・doc/client_packet.txt更新

----------------------------------------
//0660 [2009/09/23] by Rayce

・0645以降、トルリョチャギの吹き飛ばし効果がMOBが使用したときのみしか発動しないのを修正（skill.c）

・阿修羅覇王拳をShiftクリックで発動したとき、SPを0にする処理は battle_skill_attack() 内
  ではなく、呼び出し元の skill_castend_damage_id() で行う（battle.c, skill.c）

・ブランディッシュスピアをShiftクリックで発動したときのエフェクト発生処理方法を最適化（skill.c）

----------------------------------------
//0659 [2009/09/23] by Rayce

・ストームガストの3HIT目で弾かない処理をリファクタリング（battle.c）

・スキル個別の仕様切り替え機能は蛇足なので、battle_auriga.conf の「sg_type」は撤廃（battle.*, skill.c）
  11x11のユニットを1個生成するのではなく、3x3のユニットを81個生成する仕様に固定する

・ストームガストのスキルユニットのrangeを1に合わせる（db/skill_unit_db.txt）

----------------------------------------
//0658 [2009/09/23] by Rayce

・アースクェイクの計算式を一般式に変更（battle.c）
・アースクェイクに関する条件判定順序を入れ替え（battle.c）

・アースクェイクにおけるPCとMOBの判定処理を最適化（skill.c）
  以下の2つの関数は不要なので削除
	-> skill_area_sub_count_mob()
	-> skill_area_sub_count_pc()

・0655において、pkmap_noteleportの記述を除去抜けがあり
  コンパイルできなかった問題を修正（skill.c）

----------------------------------------
//0657 [2009/09/23] by Rayce

・pointshopは <point> に負数を指定しても値の補正をしないように0623以前の仕様に戻す（npc.c）
・pointshopは価格設定の「:」を省略できないように強化（npc.c）
・ショップのアイテムIDと価格の書式が間違っている場合、エラーを出力するように強化（npc.c）

----------------------------------------
//0656 [2009/09/23] by Rayce

・MAX_MOBSKILLは 64 だと大きすぎるので 48 に引き下げ（map.h）
・MOBが待機時のスキル使用を失敗したとき、return で終了せずに歩行処理を続行する（mob.c）
・unit_data構造体に追加された idlecount メンバをmob_data構造体に変更（map.h, mob.c）

----------------------------------------
//0655 [2009/09/23] by Rayce

・battle_auriga.conf の「pkmap_noteleport」を撤廃
  代わりに map_auriga.conf の「map_pk_noteleport」で全てのPKマップに対して
  一括でMAPフラグ noteleport を設定するようにする（battle.*, map.c）

・battle_auriga.conf の初期値を変更（battle.c）
	monster_skill_over = 10
	NULL = 0

----------------------------------------
//0654 [2009/09/23] by Rayce

・出来る限り BL_CHAR マクロを利用するように置き換え（battle.c, mob.c, skill.c）
・battle_calc_damage() におけるGvG補正処理を最適化（battle.c）
・演算子の優先順序が間違っている可能性があるので修正（npc.c）

----------------------------------------
//0653 [2009/09/22] by Rayce

・GvGで城主が交代したとき、ワープ中でブロックリストから外れたPCが砦外に退去できない
  問題に関する対処（battle.*, script.c）
	based on eA, thanks a lot!!

	-> buildin_maprespawnguildid() を書き換え
	   PC用の検索ルーチン buildin_maprespawnguildid_sub_pc() と、
	   MOB用の検索ルーチン buildin_maprespawnguildid_sub_mob() の2つに分離
	-> battle_auriga.conf に「maprespawnguildid_all_players」を追加
	   デフォルトは本鯖と同じ「no」
	   「yes」にするとワープ中のPCも砦外に退去させる

----------------------------------------
//0652 [2009/09/22] by Rayce

・battle_auriga.conf の「pvp_send_guild_xy」の判定は、clif_guild_xy() 内ではなく
  呼び出し元の guild_send_xy_timer_sub() で行うように変更（clif.c, guild.c）

・guild_castlealldataload() のリファクタリング（guild.c）

----------------------------------------
//0651 [2009/09/22] by Rayce

・砦で MobId: 1285〜1288 のモンスターを呼び出すと、常にギルド所属扱いになるのを撤廃（mob.c）

・NPCスクリプトの getguardianinfo 関数で、indexに1〜8以外を指定すると
  バッファオーバーフロー/アンダーフローが発生するのを修正（script.c）

----------------------------------------
//0650 [2009/09/22] by Rayce

・各砦に設定可能なガーディアンの数は、MAX_GUILDGUARDIAN ではなく直接「8」で指定する
  （mmo.h, mob.c, script.c）

	※セーブデータはガーディアンの数を「8」であることを前提として処理を行っているため、
	  MAX_GUILDGUARDIAN を「8」以外の任意の数に変更してしまうとサーバクラッシュする。
	  可変に設定できないことを明示するために、配列の数を「8」で固定化する。

・砦情報を高速に取得するために guild_mapid2gc() を追加（mmo.h, guild.*）

	※guild_mapname2gc() はMAP名を文字列比較で検索するため低速です。
	  そのため、MAP番号を用いて高速に検索を行える guild_mapid2gc() を追加しました。
	  ただし、同一MAPサーバであることが確定している場合のみ使用可能です。
	  他のMAPサーバが管理しているMAPについては検索できないので注意してください。

・NPCスクリプトの callguardian 命令で、複数体のガーディアンを呼び出すと
  最後の1体しか砦所属にならない問題を修正（script.c）
・guild_mapname2gc の引数をconstにする（guild.*）

----------------------------------------
//0649 [2009/09/22] by Rayce

・sc_startおよびsc_starte命令において、完全耐性の場合でも状態異常に掛かる問題をを修正（script.c）
・getscrate命令は status_change_rate() の結果をそのまま返すように修正（script.c）
  引数の <percentage> と戻り値を百分率から万分率に変更

・doc/script_ref.txtを修正

----------------------------------------
//0648 [2009/09/22] by Rayce

・カプラのカートサービスにおいて、職業コードが数値指定に巻き戻っていたので修正
  （script/npc/misc/npc_misc_kafra.txt）

・細かい整形（db/packet_db.txt, db/scdata_db.txt）

----------------------------------------
//0647 [2009/09/22] by Rayce

・サーバースナップショット（version.h）
